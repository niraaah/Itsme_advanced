<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì „ë¶ëŒ€ í•™ì‹ ì•±</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', Roboto, sans-serif;
            background: #f0f0f0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }
        
        .phone-container {
            width: 375px;
            height: 812px;
            background: #000;
            border-radius: 40px;
            padding: 6px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
        }
        
        .phone-screen {
            width: 100%;
            height: 100%;
            background: #fff;
            border-radius: 34px;
            overflow: hidden;
            position: relative;
        }
        
        .status-bar {
            height: 44px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
            background: #fff;
            font-size: 17px;
            font-weight: 600;
        }
        
        .status-left {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .status-right {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 16px;
        }
        
        .screen {
            display: none;
            height: calc(100% - 44px);
            overflow-y: auto;
            background: #fff;
        }
        
        .screen.active {
            display: block;
        }
        
        .header {
            padding: 15px 20px;
            border-bottom: 1px solid #f0f0f0;
            position: relative;
        }
        
        .header-icons {
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            gap: 15px;
        }
        
        .header-icon {
            width: 24px;
            height: 24px;
            border: 1px solid #ddd;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
        }
        
        .back-btn {
            font-size: 18px;
            margin-bottom: 10px;
            cursor: pointer;
        }
        
        .header-title {
            font-size: 18px;
            font-weight: 600;
            color: #333;
            margin-bottom: 5px;
            line-height: 1.3;
        }
        
        .header-subtitle {
            font-size: 14px;
            color: #999;
        }
        
        .today-special {
            background: linear-gradient(135deg, #ff6b6b, #ee5a52);
            color: white;
            padding: 15px 20px;
            font-size: 16px;
            font-weight: 600;
            text-align: center;
        }
        
        .content {
            padding: 0;
        }
        
        .menu-list {
            padding: 0 20px;
        }
        
        .menu-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
            border-bottom: 1px solid #f0f0f0;
            cursor: pointer;
        }
        
        .menu-left {
            flex: 1;
        }
        
        .menu-time {
            font-size: 14px;
            color: #666;
            margin-bottom: 5px;
        }
        
        .menu-badge {
            background: #4CAF50;
            color: white;
            padding: 2px 6px;
            border-radius: 10px;
            font-size: 11px;
            margin-left: 5px;
        }
        
        .menu-name {
            font-size: 16px;
            color: #333;
            margin-bottom: 2px;
        }
        
        .menu-location {
            font-size: 12px;
            color: #999;
        }
        
        .menu-right {
            text-align: right;
        }
        
        .menu-price {
            font-size: 18px;
            font-weight: 700;
            color: #e74c3c;
        }
        
        .menu-arrow {
            color: #ccc;
            margin-left: 10px;
        }
        
        /* í˜¼ì¡ë„ í™”ë©´ */
        .congestion-screen {
            padding: 20px;
        }
        
        .calendar-header {
            text-align: center;
            margin-bottom: 20px;
        }
        
        .calendar-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .calendar-date {
            font-size: 14px;
            color: #666;
        }
        
        .calendar {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            border-radius: 8px;
        }
        
        .calendar-day.today {
            background: #333;
            color: white;
            font-weight: 600;
        }
        
        .congestion-info {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .congestion-level {
            font-size: 24px;
            font-weight: 700;
            color: #ff6b6b;
            margin-bottom: 5px;
        }
        
        .menu-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .menu-card {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border: 1px solid #f0f0f0;
        }
        
        .menu-image {
            width: 100%;
            height: 120px;
            background: linear-gradient(45deg, #ffeaa7, #fab1a0);
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
        }
        
        .menu-card-content {
            padding: 12px;
        }
        
        .menu-card-title {
            font-size: 14px;
            font-weight: 600;
            color: #333;
            margin-bottom: 5px;
        }
        
        .menu-card-price {
            font-size: 16px;
            font-weight: 700;
            color: #e74c3c;
        }
        
        .order-section {
            background: white;
            border-top: 1px solid #f0f0f0;
            padding: 20px;
        }
        
        .quantity-control {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin-bottom: 15px;
        }
        
        .quantity-btn {
            width: 40px;
            height: 40px;
            border: 1px solid #ddd;
            border-radius: 50%;
            background: white;
            font-size: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .quantity {
            font-size: 18px;
            font-weight: 600;
            min-width: 30px;
            text-align: center;
        }
        
        .total-price {
            text-align: right;
            margin-bottom: 15px;
        }
        
        .total-label {
            font-size: 14px;
            color: #666;
        }
        
        .total-amount {
            font-size: 18px;
            font-weight: 700;
            color: #333;
        }
        
        .order-btn {
            width: 100%;
            background: #ff6b6b;
            color: white;
            border: none;
            padding: 15px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
        }
        
        /* ì•ŒëŒ í™”ë©´ (ì‹œê³„ ìŠ¤íƒ€ì¼) */
        .clock-screen {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            height: 100%;
        }
        
        .clock-time {
            font-size: 80px;
            font-weight: 300;
            margin-bottom: 10px;
            font-family: 'SF Pro Display', sans-serif;
        }
        
        .clock-date {
            font-size: 18px;
            margin-bottom: 60px;
            opacity: 0.9;
        }
        
        .alarm-notification {
            background: rgba(255,255,255,0.15);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 20px;
            margin: 0 30px;
            border: 1px solid rgba(255,255,255,0.2);
        }
        
        .notification-icon {
            font-size: 24px;
            margin-bottom: 10px;
        }
        
        .notification-text {
            font-size: 16px;
            line-height: 1.4;
        }
        
        .clock-controls {
            position: absolute;
            bottom: 50px;
            left: 0;
            right: 0;
            display: flex;
            justify-content: center;
            gap: 40px;
        }
        
        .control-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: rgba(255,255,255,0.2);
            border: 1px solid rgba(255,255,255,0.3);
            color: white;
            font-size: 24px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .detail-menu-item {
            background: white;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .detail-menu-name {
            font-size: 16px;
            font-weight: 600;
            color: #333;
            margin-bottom: 5px;
        }
        
        .detail-menu-desc {
            font-size: 14px;
            color: #666;
            margin-bottom: 8px;
        }
        
        .detail-menu-price {
            font-size: 16px;
            font-weight: 700;
            color: #e74c3c;
        }
        
        .navigation {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 80px;
            background: white;
            border-top: 1px solid #f0f0f0;
            display: flex;
            justify-content: space-around;
            align-items: center;
        }
        
        .nav-item {
            text-align: center;
            cursor: pointer;
            padding: 10px;
            color: #999;
            transition: color 0.3s;
            flex: 1;
        }
        
        .nav-item.active {
            color: #667eea;
        }
        
        .nav-icon {
            font-size: 24px;
            margin-bottom: 5px;
        }
        
        .nav-text {
            font-size: 11px;
        }
        
        .allergy-button {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
            cursor: pointer;
        }

        /* ê²°ì œ ë°©ë²• ì„ íƒ ë²„íŠ¼ë“¤ */
        .payment-method {
            display: flex;
            align-items: center;
            padding: 15px;
            border: 2px solid #f0f0f0;
            border-radius: 8px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .payment-method.selected {
            border-color: #ff6b6b;
            background: #fff5f5;
        }

        .payment-method-icon {
            font-size: 24px;
            margin-right: 15px;
        }

        .payment-method-info {
            flex: 1;
        }

        .payment-method-name {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 2px;
        }

        .payment-method-desc {
            font-size: 12px;
            color: #666;
        }

        .payment-radio {
            width: 20px;
            height: 20px;
            border: 2px solid #ddd;
            border-radius: 50%;
            position: relative;
            transition: all 0.3s ease;
        }

        .payment-method.selected .payment-radio {
            border-color: #ff6b6b;
        }

        .payment-method.selected .payment-radio::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 10px;
            height: 10px;
            background: #ff6b6b;
            border-radius: 50%;
        }

        /* ì•½ê´€ ë™ì˜ ì²´í¬ë°•ìŠ¤ */
        .terms-checkbox {
            display: flex;
            align-items: center;
            padding: 15px;
            border: 1px solid #f0f0f0;
            border-radius: 8px;
            margin-bottom: 15px;
            cursor: pointer;
        }

        .terms-checkbox input[type="checkbox"] {
            width: 18px;
            height: 18px;
            margin-right: 10px;
            accent-color: #ff6b6b;
        }

        .terms-text {
            font-size: 14px;
            color: #333;
        }

        .terms-link {
            color: #ff6b6b;
            text-decoration: underline;
            cursor: pointer;
        }

        /* ê²°ì œ ë²„íŠ¼ ë¹„í™œì„±í™” ìŠ¤íƒ€ì¼ */
        /* ì•Œë¦¼ ì„¼í„° ìŠ¤íƒ€ì¼ */
        .notification-center {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, #87CEEB 0%, #4682B4 50%, #2F4F4F 100%);
            z-index: 2000;
            transform: translateY(-100%);
            transition: transform 0.3s ease;
            color: white;
            padding: 44px 20px 20px;
            overflow-y: auto;
        }

        .notification-center.active {
            transform: translateY(0);
        }

        .notification-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .notification-date {
            font-size: 16px;
            opacity: 0.9;
            margin-bottom: 10px;
        }

        .notification-time {
            font-size: 80px;
            font-weight: 300;
            font-family: 'SF Pro Display', sans-serif;
        }

        .notification-content {
            flex: 1;
            margin-bottom: 40px;
        }

        .notification-section {
            margin-bottom: 30px;
        }

        .notification-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 15px;
            opacity: 0.9;
        }

        .notification-item {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(20px);
            border-radius: 16px;
            padding: 15px;
            margin-bottom: 10px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: flex-start;
            gap: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .notification-item:hover {
            background: rgba(255, 255, 255, 0.25);
        }

        .notification-icon {
            flex-shrink: 0;
        }

        .notification-body {
            flex: 1;
            min-width: 0;
        }

        .notification-app {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 4px;
            opacity: 0.9;
        }

        .notification-text {
            font-size: 14px;
            line-height: 1.4;
            margin-bottom: 6px;
        }

        .notification-time-small {
            font-size: 12px;
            opacity: 0.7;
        }

        .notification-close {
            background: none;
            border: none;
            color: white;
            font-size: 18px;
            opacity: 0.7;
            cursor: pointer;
            padding: 0;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .notification-close:hover {
            opacity: 1;
            background: rgba(255, 255, 255, 0.2);
        }

        .notification-controls {
            position: absolute;
            bottom: 30px;
            left: 0;
            right: 0;
            display: flex;
            justify-content: center;
            gap: 40px;
        }

        .control-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            font-size: 24px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .control-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        /* í™ˆ ì¸ë””ì¼€ì´í„° ë°” */
        .home-indicator {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            width: 134px;
            height: 5px;
            background: rgba(255, 255, 255, 0.6);
            border-radius: 3px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .home-indicator:hover {
            background: rgba(255, 255, 255, 0.8);
        }

        .home-indicator:active {
            background: rgba(255, 255, 255, 1);
            transform: translateX(-50%) scale(0.95);
        }

        /* ì˜¤ëŠ˜ì˜ ë©”ë‰´ í™”ë©´ ìŠ¤íƒ€ì¼ */
        .today-menu-category {
            background: white;
            border-radius: 12px;
            margin-bottom: 20px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .category-header {
            background: #f8f9fa;
            padding: 15px 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            border-bottom: 1px solid #f0f0f0;
        }

        .category-number {
            color: #333;
            font-size: 16px;
            font-weight: 600;
        }

        .category-name {
            flex: 1;
            font-size: 16px;
            font-weight: 600;
            color: #333;
        }

        .category-status {
            padding: 4px 8px;
            border-radius: 10px;
            font-size: 11px;
            font-weight: 600;
        }

        .category-status.open {
            background: #4CAF50;
            color: white;
        }

        .category-status.closed {
            background: #e74c3c;
            color: white;
        }

        .category-menu {
            padding: 0;
        }

        .menu-item-today {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            border-bottom: 1px solid #f8f9fa;
            position: relative;
        }

        .menu-item-today:last-child {
            border-bottom: none;
        }

        .menu-item-today.featured {
            background: linear-gradient(135deg, #fff5f5, #fef5e7);
        }

        .menu-name {
            flex: 1;
            font-size: 14px;
            font-weight: 500;
            color: #333;
        }

        .menu-price {
            font-size: 14px;
            font-weight: 600;
            color: #ff6b6b;
            margin-right: 10px;
        }

        .menu-badge {
            background: #ff6b6b;
            color: white;
            padding: 2px 6px;
            border-radius: 8px;
            font-size: 10px;
            font-weight: 600;
        }
    </style>
</head>
<body>
    <div class="phone-container">
        <div class="phone-screen">
            <!-- ìƒíƒœë°” -->
            <div class="status-bar" onclick="toggleNotificationCenter()">
                <div class="status-left">
                    <span id="currentTime">12:31</span>
                </div>
                <div class="status-right">
                    <span>ğŸ“¶</span>
                    <span>ğŸ›œ</span>
                    <span>ğŸ”‹</span>
                </div>
            </div>
            
            <!-- ì•Œë¦¼ ì„¼í„° -->
            <div class="notification-center" id="notificationCenter">
                <div class="notification-header">
                    <div class="notification-date">6ì›” 5ì¼ ëª©ìš”ì¼</div>
                    <div class="notification-time">1:34</div>
                </div>
                
                <div class="notification-content">
                    <div class="notification-section">
                        <div class="notification-title">ì•Œë¦¼ ì„¼í„°</div>
                        
                        <div class="notification-item" onclick="openTodayMenu()">
                            <div class="notification-icon">
                                <div class="app-icon" style="background: white; border-radius: 8px; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; overflow: hidden;">
                                    <img src="./itsme_logo.png" alt="ì‡ì¸ ë¯¸ ì•± ì•„ì´ì½˜" style="width: 24px; height: 24px;">
                                </div>
                            </div>
                            <div class="notification-body">
                                <div class="notification-app">ì „ë¶ëŒ€ í•™ì‹ ì•±</div>
                                <div class="notification-text">ì˜¤ëŠ˜ì˜ íŠ¹ì‹ì„ í™•ì¸í•´ë³´ì„¸ìš”!<br>ì™•ìƒˆìš°íŠ€ê¹€ë“¤ê¹¨ì¥ë°¥*ê³„ë€í›„ë¼ì´</div>
                                <div class="notification-time-small">ì–´ì œ ì˜¤í›„ 9:54</div>
                            </div>
                            <button class="notification-close" onclick="event.stopPropagation(); closeNotification(this)">Ã—</button>
                        </div>
                    </div>
                </div>
                
                <div class="notification-controls">
                    <button class="control-btn">ğŸ’¡</button>
                    <button class="control-btn">ğŸ“·</button>
                </div>
                
                <!-- ì¸ë””ì¼€ì´í„° ë°” -->
                <div class="home-indicator" onclick="closeNotificationCenter()"></div>
            </div>
            
            <!-- ë©”ì¸ ë©”ë‰´ ë¦¬ìŠ¤íŠ¸ í™”ë©´ -->
            <div class="screen active" id="mainScreen">
                <div class="header">
                    <div class="back-btn">â€¹</div>
                    <div class="header-title">ì „ë¶ëŒ€ í›„ìƒê´€ ì‹ë‹¹<br>ì½”ë„ˆë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”!</div>
                    <div class="header-icons">
                        <div class="header-icon" onclick="showCouponScreen()">ğŸ«</div>
                        <div class="header-icon" onclick="showOrderHistoryScreen()">ğŸ“‹</div>
                    </div>
                </div>
                
                <div class="content">
                    <div class="menu-list">
                        <div class="menu-item" onclick="showCategoryMenu('ì¡°ì‹/ì„ì‹ğŸš')">
                            <div class="menu-left">
                                <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 5px;">
                                    <span style="color: #333; font-size: 16px; font-weight: 600;">â‘ </span>
                                    <span style="font-size: 16px; font-weight: 600;">ì¡°ì‹/ì„ì‹ğŸš</span>
                                    <span style="background: #e74c3c; color: white; padding: 2px 6px; border-radius: 10px; font-size: 11px;">ì˜ì—…ë§ˆê°</span>
                                </div>
                                <div style="display: flex; gap: 10px; margin-top: 8px; font-size: 12px;">
                                    <span style="background: #e3f2fd; color: #1976d2; padding: 2px 6px; border-radius: 8px;">ğŸ« ì‚¬ìš© 142ì¥</span>
                                    <span style="background: #f3e5f5; color: #7b1fa2; padding: 2px 6px; border-radius: 8px;">ğŸ’³ êµ¬ë§¤ 180ì¥</span>
                                </div>
                            </div>
                            <div class="menu-right">
                                <span class="menu-arrow">â€º</span>
                            </div>
                        </div>
                        
                        <div class="menu-item" onclick="showCategoryMenu('ì°Œê°œ/ëŒì†¥ğŸ²')">
                            <div class="menu-left">
                                <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 5px;">
                                    <span style="color: #333; font-size: 16px; font-weight: 600;">â‘¡</span>
                                    <span style="font-size: 16px; font-weight: 600;">ì°Œê°œ/ëŒì†¥ğŸ²</span>
                                    <span style="background: #4CAF50; color: white; padding: 2px 6px; border-radius: 10px; font-size: 11px;">ì˜ì—…ì¤‘</span>
                                </div>
                                <div style="display: flex; gap: 10px; margin-top: 8px; font-size: 12px;">
                                    <span style="background: #e3f2fd; color: #1976d2; padding: 2px 6px; border-radius: 8px;">ğŸ« ì‚¬ìš© 89ì¥</span>
                                    <span style="background: #f3e5f5; color: #7b1fa2; padding: 2px 6px; border-radius: 8px;">ğŸ’³ êµ¬ë§¤ 120ì¥</span>
                                </div>
                            </div>
                            <div class="menu-right">
                                <span class="menu-arrow">â€º</span>
                            </div>
                        </div>
                        
                        <div class="menu-item" onclick="showCategoryMenu('í•œì‹ğŸš')">
                            <div class="menu-left">
                                <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 5px;">
                                    <span style="color: #333; font-size: 16px; font-weight: 600;">â‘£</span>
                                    <span style="font-size: 16px; font-weight: 600;">í•œì‹ğŸš</span>
                                    <span style="background: #4CAF50; color: white; padding: 2px 6px; border-radius: 10px; font-size: 11px;">ì˜ì—…ì¤‘</span>
                                </div>
                                <div style="display: flex; gap: 10px; margin-top: 8px; font-size: 12px;">
                                    <span style="background: #e3f2fd; color: #1976d2; padding: 2px 6px; border-radius: 8px;">ğŸ« ì‚¬ìš© 234ì¥</span>
                                    <span style="background: #f3e5f5; color: #7b1fa2; padding: 2px 6px; border-radius: 8px;">ğŸ’³ êµ¬ë§¤ 280ì¥</span>
                                </div>
                            </div>
                            <div class="menu-right">
                                <span class="menu-arrow">â€º</span>
                            </div>
                        </div>
                        
                        <div class="menu-item" onclick="showCategoryMenu('ì–‘ì‹ğŸ - ì˜¤ë¯€ë¼ì´ìŠ¤')">
                            <div class="menu-left">
                                <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 5px;">
                                    <span style="color: #333; font-size: 16px; font-weight: 600;">â‘¤</span>
                                    <span style="font-size: 16px; font-weight: 600;">ì–‘ì‹ğŸ - ì˜¤ë¯€ë¼ì´ìŠ¤</span>
                                    <span style="background: #4CAF50; color: white; padding: 2px 6px; border-radius: 10px; font-size: 11px;">ì˜ì—…ì¤‘</span>
                                </div>
                                <div style="display: flex; gap: 10px; margin-top: 8px; font-size: 12px;">
                                    <span style="background: #e3f2fd; color: #1976d2; padding: 2px 6px; border-radius: 8px;">ğŸ« ì‚¬ìš© 76ì¥</span>
                                    <span style="background: #f3e5f5; color: #7b1fa2; padding: 2px 6px; border-radius: 8px;">ğŸ’³ êµ¬ë§¤ 95ì¥</span>
                                </div>
                            </div>
                            <div class="menu-right">
                                <span class="menu-arrow">â€º</span>
                            </div>
                        </div>
                        
                        <div class="menu-item" onclick="showCategoryMenu('ì–‘ì‹ğŸ - ëˆê¹ŒìŠ¤')">
                            <div class="menu-left">
                                <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 5px;">
                                    <span style="color: #333; font-size: 16px; font-weight: 600;">â‘¤</span>
                                    <span style="font-size: 16px; font-weight: 600;">ì–‘ì‹ğŸ - ëˆê¹ŒìŠ¤</span>
                                    <span style="background: #4CAF50; color: white; padding: 2px 6px; border-radius: 10px; font-size: 11px;">ì˜ì—…ì¤‘</span>
                                </div>
                                <div style="display: flex; gap: 10px; margin-top: 8px; font-size: 12px;">
                                    <span style="background: #e3f2fd; color: #1976d2; padding: 2px 6px; border-radius: 8px;">ğŸ« ì‚¬ìš© 156ì¥</span>
                                    <span style="background: #f3e5f5; color: #7b1fa2; padding: 2px 6px; border-radius: 8px;">ğŸ’³ êµ¬ë§¤ 190ì¥</span>
                                </div>
                            </div>
                            <div class="menu-right">
                                <span class="menu-arrow">â€º</span>
                            </div>
                        </div>
                        
                        <div class="menu-item" onclick="showCategoryMenu('ë¶„ì‹ğŸœ')">
                            <div class="menu-left">
                                <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 5px;">
                                    <span style="color: #333; font-size: 16px; font-weight: 600;">â‘¥</span>
                                    <span style="font-size: 16px; font-weight: 600;">ë¶„ì‹ğŸœ</span>
                                    <span style="background: #4CAF50; color: white; padding: 2px 6px; border-radius: 10px; font-size: 11px;">ì˜ì—…ì¤‘</span>
                                </div>
                                <div style="display: flex; gap: 10px; margin-top: 8px; font-size: 12px;">
                                    <span style="background: #e3f2fd; color: #1976d2; padding: 2px 6px; border-radius: 8px;">ğŸ« ì‚¬ìš© 198ì¥</span>
                                    <span style="background: #f3e5f5; color: #7b1fa2; padding: 2px 6px; border-radius: 8px;">ğŸ’³ êµ¬ë§¤ 220ì¥</span>
                                </div>
                            </div>
                            <div class="menu-right">
                                <span class="menu-arrow">â€º</span>
                            </div>
                        </div>
                        
                        <div class="menu-item" onclick="showCategoryMenu('ë¼ë©´ãƒ»ìƒëŸ¬ë“œğŸ¥—')">
                            <div class="menu-left">
                                <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 5px;">
                                    <span style="color: #333; font-size: 16px; font-weight: 600;">â‘¦</span>
                                    <span style="font-size: 16px; font-weight: 600;">ë¼ë©´ãƒ»ìƒëŸ¬ë“œğŸ¥—</span>
                                    <span style="background: #4CAF50; color: white; padding: 2px 6px; border-radius: 10px; font-size: 11px;">ì˜ì—…ì¤‘</span>
                                </div>
                                <div style="display: flex; gap: 10px; margin-top: 8px; font-size: 12px;">
                                    <span style="background: #e3f2fd; color: #1976d2; padding: 2px 6px; border-radius: 8px;">ğŸ« ì‚¬ìš© 134ì¥</span>
                                    <span style="background: #f3e5f5; color: #7b1fa2; padding: 2px 6px; border-radius: 8px;">ğŸ’³ êµ¬ë§¤ 160ì¥</span>
                                </div>
                            </div>
                            <div class="menu-right">
                                <span class="menu-arrow">â€º</span>
                            </div>
                        </div>
                        
                        <!-- ì˜¤ëŠ˜ì˜ ì „ì²´ ë©”ë‰´ ë³´ê¸° ë²„íŠ¼ -->
                        <div style="text-align: center; margin: 30px 20px 15px 20px;">
                            <button onclick="openTodayMenu()" style="
                                background: none; 
                                border: none; 
                                color: #667eea; 
                                font-size: 16px; 
                                font-weight: 600; 
                                cursor: pointer; 
                                text-decoration: underline;
                                padding: 10px 0;
                                transition: color 0.3s ease;
                            " onmouseover="this.style.color='#5a67d8'" onmouseout="this.style.color='#667eea'">
                                ğŸ“‹ ì˜¤ëŠ˜ì˜ ì „ì²´ ë©”ë‰´ ë³´ê¸°
                            </button>
                        </div>
                        
                        <!-- ì•ŒëŸ¬ì§€ ì„¤ì • ë²„íŠ¼ -->
                        <div class="allergy-button" onclick="showAllergyScreen()">
                            <div style="font-size: 18px; margin-bottom: 10px;">ğŸš«</div>
                            <div style="font-weight: 600; color: #856404;">ì•ŒëŸ¬ì§€ ì •ë³´ ì„¤ì •</div>
                            <div style="font-size: 14px; color: #856404; margin-top: 5px;">
                                ì•ˆì „í•œ ì‹ì‚¬ë¥¼ ìœ„í•´ ì•ŒëŸ¬ì§€ ì •ë³´ë¥¼ ë“±ë¡í•˜ì„¸ìš”
                                <div id="allergyStatus" style="margin-top: 5px; font-size: 12px; color: #666;"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- êµí™˜ê¶Œ/ì¿ í° í™”ë©´ -->
            <div class="screen" id="couponScreen">
                <div class="header">
                    <div class="back-btn" onclick="goBack()">â€¹</div>
                    <div class="header-title">êµí™˜ê¶Œ/ì¿ í°</div>
                </div>
                
                <div style="padding: 20px; padding-bottom: 40px;">
                    <div style="display: flex; margin-bottom: 30px;">
                        <div id="couponTab1" style="flex: 1; text-align: center; padding: 15px; border-bottom: 3px solid #333; font-size: 16px; font-weight: 600; cursor: pointer;" onclick="switchCouponTab(1)">êµí™˜ê¶Œ</div>
                        <div id="couponTab2" style="flex: 1; text-align: center; padding: 15px; border-bottom: 1px solid #f0f0f0; font-size: 16px; color: #999; cursor: pointer;" onclick="switchCouponTab(2)">ì¿ í°</div>
                    </div>
                    
                    <div id="couponContent1">
                        <div style="margin-bottom: 30px;">
                            <div style="display: flex; gap: 15px; margin-bottom: 20px;">
                                <div style="background: #333; color: white; padding: 8px 16px; border-radius: 20px; font-size: 14px; font-weight: 600;">ì‚¬ìš©ê°€ëŠ¥</div>
                                <div style="background: #f0f0f0; color: #666; padding: 8px 16px; border-radius: 20px; font-size: 14px; font-weight: 600;">ê¸°ê°„ë§Œë£Œ</div>
                            </div>
                            
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <span style="font-size: 16px;">ì´ 0ê°œ</span>
                                <span style="font-size: 14px; color: #666;">ğŸ”„ ì˜¤ë˜ëœìˆœ</span>
                            </div>
                        </div>
                        
                        <div style="text-align: center; padding: 80px 20px; color: #999;">
                            <div style="font-size: 60px; margin-bottom: 20px; opacity: 0.3;">ğŸ«</div>
                            <div style="font-size: 16px;">ë³´ìœ í•œ êµí™˜ê¶Œì´ ì—†ìŠµë‹ˆë‹¤</div>
                        </div>
                    </div>
                    
                    <div id="couponContent2" style="display: none;">
                        <div style="text-align: center; padding: 80px 20px; color: #999;">
                            <div style="font-size: 60px; margin-bottom: 20px; opacity: 0.3;">ğŸŸï¸</div>
                            <div style="font-size: 16px;">ë³´ìœ í•œ ì¿ í°ì´ ì—†ìŠµë‹ˆë‹¤</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- ì£¼ë¬¸ ë‚´ì—­ í™”ë©´ -->
            <div class="screen" id="orderHistoryScreen">
                <div class="header">
                    <div class="back-btn" onclick="goBack()">â€¹</div>
                    <div class="header-title">ì£¼ë¬¸ ë‚´ì—­</div>
                </div>
                
                <div style="padding: 20px; padding-bottom: 40px;">
                    <div style="display: flex; margin-bottom: 30px;">
                        <div id="orderTab1" style="flex: 1; text-align: center; padding: 15px; border-bottom: 3px solid #333; font-size: 16px; font-weight: 600; cursor: pointer;" onclick="switchOrderTab(1)">ì§„í–‰ì¤‘</div>
                        <div id="orderTab2" style="flex: 1; text-align: center; padding: 15px; border-bottom: 1px solid #f0f0f0; font-size: 16px; color: #999; cursor: pointer;" onclick="switchOrderTab(2)">ì „ì²´ ë‚´ì—­</div>
                    </div>
                    
                    <div id="orderContent1">
                        <div style="text-align: center; padding: 80px 20px; color: #999;">
                            <div style="font-size: 60px; margin-bottom: 20px; opacity: 0.3;">ğŸ“‹</div>
                            <div style="font-size: 16px;">ì£¼ë¬¸ í˜„í™©ì´ ì—†ìŠµë‹ˆë‹¤.</div>
                        </div>
                    </div>
                    
                    <div id="orderContent2" style="display: none;">
                        <div style="text-align: center; padding: 80px 20px; color: #999;">
                            <div style="font-size: 60px; margin-bottom: 20px; opacity: 0.3;">ğŸ“‹</div>
                            <div style="font-size: 16px;">ì£¼ë¬¸ ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤.</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- í˜¼ì¡ë„ í™”ë©´ -->
            <div class="screen" id="congestionScreen">
                <div class="header">
                    <div class="back-btn" onclick="showMainScreen()">â€¹</div>
                    <div class="header-title">ì „ë¶ëŒ€ í›„ìƒê´€ ì‹ë‹¹ (â‘£í•œì‹ğŸš)</div>
                    <div class="header-icons">
                        <div class="header-icon" onclick="showCouponScreen()">ğŸ«</div>
                        <div class="header-icon" onclick="showOrderHistoryScreen()">ğŸ“‹</div>
                    </div>
                </div>
                
                <div class="congestion-screen">
                    <div class="calendar-header">
                        <div style="color: #ff6b6b; font-size: 16px; margin-bottom: 10px;">ğŸ“… 6ì›” ì£¼ê°„ ë©”ë‰´</div>
                    </div>
                    
                    <div class="week-calendar" style="display: flex; justify-content: space-between; margin-bottom: 20px; padding: 0 10px;">
                        <div style="text-align: center; color: #999; font-size: 12px;">
                            <div>ì¼</div>
                            <div style="margin-top: 5px; font-size: 18px;">1</div>
                        </div>
                        <div style="text-align: center; color: #999; font-size: 12px;">
                            <div>ì›”</div>
                            <div style="margin-top: 5px; font-size: 18px;">2</div>
                        </div>
                        <div style="text-align: center; color: #999; font-size: 12px;">
                            <div>í™”</div>
                            <div style="margin-top: 5px; font-size: 18px;">3</div>
                        </div>
                        <div style="text-align: center; color: white; background: #333; border-radius: 50%; width: 40px; height: 40px; display: flex; flex-direction: column; justify-content: center; font-size: 12px;">
                            <div>ìˆ˜</div>
                            <div style="font-size: 14px; font-weight: 600;">4</div>
                        </div>
                        <div style="text-align: center; color: #999; font-size: 12px;">
                            <div>ëª©</div>
                            <div style="margin-top: 5px; font-size: 18px;">5</div>
                        </div>
                        <div style="text-align: center; color: #999; font-size: 12px;">
                            <div>ê¸ˆ</div>
                            <div style="margin-top: 5px; font-size: 18px;">6</div>
                        </div>
                        <div style="text-align: center; color: #999; font-size: 12px;">
                            <div>í† </div>
                            <div style="margin-top: 5px; font-size: 18px;">7</div>
                        </div>
                    </div>
                    
                    <!-- í˜¼ì¡ë„ ì •ë³´ ì„¹ì…˜ -->
                    <div style="background: white; border-radius: 12px; padding: 20px; margin-bottom: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                            <div style="font-size: 18px; font-weight: 600;">í˜„ì¬ í˜¼ì¡ë„</div>
                            <div style="font-size: 12px; color: #666;">ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸</div>
                        </div>
                        
                        <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 20px;">
                            <div style="flex: 1;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                    <span style="font-size: 14px; color: #666;">í˜„ì¬ ì¸ì›</span>
                                    <span id="currentCongestion" style="font-size: 16px; font-weight: 600; color: #ff6b6b;">192/210</span>
                                </div>
                                <div style="background: #f0f0f0; height: 8px; border-radius: 4px; overflow: hidden;">
                                    <div id="congestionBar" style="background: linear-gradient(90deg, #4CAF50 0%, #FFC107 50%, #ff6b6b 100%); height: 100%; width: 91%; transition: width 0.3s ease;"></div>
                                </div>
                                <div style="display: flex; justify-content: space-between; margin-top: 5px; font-size: 11px; color: #999;">
                                    <span>ì—¬ìœ </span>
                                    <span>ë³´í†µ</span>
                                    <span>í˜¼ì¡</span>
                                </div>
                            </div>
                            <div style="text-align: center;">
                                <div id="congestionLevel" style="font-size: 24px; font-weight: 700; color: #ff6b6b;">91%</div>
                                <div style="font-size: 12px; color: #666;">í˜¼ì¡</div>
                            </div>
                        </div>
                        
                        <!-- ì‹œê°„ë³„ í˜¼ì¡ë„ ê·¸ë˜í”„ -->
                        <div style="border-top: 1px solid #f0f0f0; padding-top: 15px;">
                            <div style="font-size: 14px; font-weight: 600; margin-bottom: 15px; color: #333;">ì˜¤ëŠ˜ ì‹œê°„ë³„ í˜¼ì¡ë„</div>
                            <div style="display: flex; align-items: end; justify-content: space-between; height: 80px; padding: 0 5px;">
                                <div style="display: flex; flex-direction: column; align-items: center;">
                                    <div style="background: #4CAF50; width: 12px; height: 25px; border-radius: 2px; margin-bottom: 5px;"></div>
                                    <span style="font-size: 10px; color: #666;">11:30</span>
                                </div>
                                <div style="display: flex; flex-direction: column; align-items: center;">
                                    <div style="background: #4CAF50; width: 12px; height: 35px; border-radius: 2px; margin-bottom: 5px;"></div>
                                    <span style="font-size: 10px; color: #666;">12:00</span>
                                </div>
                                <div style="display: flex; flex-direction: column; align-items: center;">
                                    <div style="background: #FFC107; width: 12px; height: 55px; border-radius: 2px; margin-bottom: 5px;"></div>
                                    <span style="font-size: 10px; color: #666;">12:30</span>
                                </div>
                                <div style="display: flex; flex-direction: column; align-items: center;">
                                    <div style="background: #ff6b6b; width: 12px; height: 75px; border-radius: 2px; margin-bottom: 5px;"></div>
                                    <span style="font-size: 10px; color: #666; font-weight: 600;">13:00</span>
                                </div>
                                <div style="display: flex; flex-direction: column; align-items: center;">
                                    <div style="background: #FFC107; width: 12px; height: 45px; border-radius: 2px; margin-bottom: 5px;"></div>
                                    <span style="font-size: 10px; color: #666;">13:30</span>
                                </div>
                                <div style="display: flex; flex-direction: column; align-items: center;">
                                    <div style="background: #4CAF50; width: 12px; height: 30px; border-radius: 2px; margin-bottom: 5px;"></div>
                                    <span style="font-size: 10px; color: #666;">14:00</span>
                                </div>
                            </div>
                            <div style="text-align: center; margin-top: 10px; font-size: 11px; color: #666;">
                                ğŸŸ¢ ì—¬ìœ  ğŸŸ¡ ë³´í†µ ğŸ”´ í˜¼ì¡
                            </div>
                        </div>
                    </div>
                    
                    <div id="menuContainer">
                        <!-- ë©”ë‰´ë“¤ì´ ë™ì ìœ¼ë¡œ ì—¬ê¸°ì— ì¶”ê°€ë©ë‹ˆë‹¤ -->
                    </div>
                </div>
            </div>
            
            <!-- ì¥ë°”êµ¬ë‹ˆ í™”ë©´ -->
            <div class="screen" id="cartScreen">
                <div class="header">
                    <div class="back-btn" onclick="showCongestionScreen()">â€¹</div>
                    <div class="header-title">ì¥ë°”êµ¬ë‹ˆ</div>
                    <div style="position: absolute; right: 20px; top: 50%; transform: translateY(-50%); cursor: pointer;" onclick="showCongestionScreen()">Ã—</div>
                </div>
                
                <div style="padding: 20px; padding-bottom: 40px;">
                    <div id="cartItems">
                        <!-- ì¥ë°”êµ¬ë‹ˆ ì•„ì´í…œë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
                    </div>
                    
                    <div style="margin-top: 30px;">
                        <div style="font-size: 18px; font-weight: 600; margin-bottom: 5px;">ì „ë¶ëŒ€ í›„ìƒê´€ ì‹ë‹¹</div>
                        <div style="font-size: 14px; color: #666;">í›„ìƒê´€</div>
                    </div>
                    
                    <div style="margin: 20px 0;">
                        <div style="font-size: 16px; font-weight: 600; margin-bottom: 15px;">í¬ì¸íŠ¸ ì‚¬ìš©</div>
                        <div style="border: 1px solid #ddd; border-radius: 8px; padding: 15px; color: #999; font-size: 14px;">
                            ì„ íƒëœ í¬ì¸íŠ¸ ìˆ˜ë‹¨ì´ ì—†ìŠµë‹ˆë‹¤.
                        </div>
                    </div>
                    
                    <div style="border-top: 1px solid #f0f0f0; padding-top: 20px;">
                        <div style="font-size: 16px; font-weight: 600; margin-bottom: 15px;">ê²°ì œ ê¸ˆì•¡</div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px; font-size: 14px;">
                            <span>[ìƒí’ˆ ê¸ˆì•¡] ì¥ë°”êµ¬ë‹ˆì— ë‹´ê¸´ ìƒí’ˆ ì´ ê¸ˆì•¡</span>
                            <span id="cartSubtotal">0ì›</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 20px; font-size: 14px; color: #666;">
                            <span>[ì ë¦½] í›„ìƒê´€ ì‹ë‹¹ ì¡°í•©ì› ë©¤ë²„ì‹­ 1%ì ë¦½(í•™ìƒ)</span>
                            <span id="cartPoints">0P</span>
                        </div>
                        <div style="border-top: 1px solid #f0f0f0; padding-top: 15px; display: flex; justify-content: space-between; font-size: 18px; font-weight: 700;">
                            <span>í•©ê³„</span>
                            <span id="cartTotal">0ì›</span>
                        </div>
                    </div>
                    
                    <button onclick="showPaymentScreen()" style="width: 100%; background: #ff6b6b; color: white; border: none; padding: 15px; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer; margin-top: 20px;">
                        ì´ <span id="cartTotalBtn">0ì›</span> ê²°ì œí•˜ê¸°
                    </button>
                </div>
            </div>
            
            <!-- ê²°ì œ í™”ë©´ -->
            <div class="screen" id="paymentScreen">
                <div class="header">
                    <div class="back-btn" onclick="showCartScreen()">â€¹</div>
                    <div class="header-title">ê²°ì œ</div>
                    <div style="position: absolute; right: 20px; top: 50%; transform: translateY(-50%); cursor: pointer;" onclick="showCartScreen()">Ã—</div>
                </div>
                
                <div style="padding: 20px; padding-bottom: 40px; height: calc(100vh - 100px); overflow-y: auto;">
                    <!-- ì£¼ë¬¸ ìƒí’ˆ ìš”ì•½ -->
                    <div style="background: #f8f9fa; border-radius: 12px; padding: 15px; margin-bottom: 20px;">
                        <div style="font-size: 16px; font-weight: 600; margin-bottom: 10px; color: #333;">ì£¼ë¬¸ ìƒí’ˆ</div>
                        <div id="paymentOrderSummary">
                            <!-- ì£¼ë¬¸ ìƒí’ˆ ëª©ë¡ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                        </div>
                        <div style="border-top: 1px solid #e9ecef; padding-top: 10px; margin-top: 10px;">
                            <div style="display: flex; justify-content: between; font-size: 16px; font-weight: 600;">
                                <span>ì´ ì£¼ë¬¸ê¸ˆì•¡</span>
                                <span id="paymentOrderTotal" style="color: #ff6b6b;">0ì›</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ê²°ì œ ìˆ˜ë‹¨ ì„ íƒ -->
                    <div style="margin-bottom: 25px;">
                        <div style="font-size: 16px; font-weight: 600; margin-bottom: 15px; color: #333;">ê²°ì œ ìˆ˜ë‹¨</div>
                        
                        <div class="payment-method" onclick="selectPaymentMethod('card')" id="paymentCard">
                            <div class="payment-method-icon">ğŸ’³</div>
                            <div class="payment-method-info">
                                <div class="payment-method-name">ì‹ ìš©/ì²´í¬ì¹´ë“œ</div>
                                <div class="payment-method-desc">ê°„í¸í•˜ê³  ì•ˆì „í•œ ì¹´ë“œ ê²°ì œ</div>
                            </div>
                            <div class="payment-radio"></div>
                        </div>
                        
                        <div class="payment-method" onclick="selectPaymentMethod('kakao')" id="paymentKakao">
                            <div class="payment-method-icon">ğŸ’›</div>
                            <div class="payment-method-info">
                                <div class="payment-method-name">ì¹´ì¹´ì˜¤í˜ì´</div>
                                <div class="payment-method-desc">ê°„í¸ ê²°ì œ ì„œë¹„ìŠ¤</div>
                            </div>
                            <div class="payment-radio"></div>
                        </div>
                        
                        <div class="payment-method" onclick="selectPaymentMethod('naver')" id="paymentNaver">
                            <div class="payment-method-icon">ğŸ’š</div>
                            <div class="payment-method-info">
                                <div class="payment-method-name">ë„¤ì´ë²„í˜ì´</div>
                                <div class="payment-method-desc">ë„¤ì´ë²„ ê°„í¸ ê²°ì œ</div>
                            </div>
                            <div class="payment-radio"></div>
                        </div>
                        
                        <div class="payment-method" onclick="selectPaymentMethod('samsung')" id="paymentSamsung">
                            <div class="payment-method-icon">ğŸ“±</div>
                            <div class="payment-method-info">
                                <div class="payment-method-name">ì‚¼ì„±í˜ì´</div>
                                <div class="payment-method-desc">ì‚¼ì„± ê°„í¸ ê²°ì œ</div>
                            </div>
                            <div class="payment-radio"></div>
                        </div>
                    </div>
                    
                    <!-- ì•½ê´€ ë™ì˜ -->
                    <div style="margin-bottom: 25px;">
                        <div style="font-size: 16px; font-weight: 600; margin-bottom: 15px; color: #333;">ì•½ê´€ ë™ì˜</div>
                        
                        <div class="terms-checkbox" onclick="toggleTermsAgreement('all')" id="termsAll">
                            <input type="checkbox" id="checkboxAll" onclick="toggleTermsAgreement('all')">
                            <span class="terms-text">ì „ì²´ ë™ì˜</span>
                        </div>
                        
                        <div class="terms-checkbox" onclick="toggleTermsAgreement('purchase')" id="termsPurchase">
                            <input type="checkbox" id="checkboxPurchase">
                            <span class="terms-text">êµ¬ë§¤ ì¡°ê±´ ë° ì„œë¹„ìŠ¤ ì•½ê´€ ë™ì˜ (í•„ìˆ˜)</span>
                        </div>
                        
                        <div class="terms-checkbox" onclick="toggleTermsAgreement('privacy')" id="termsPrivacy">
                            <input type="checkbox" id="checkboxPrivacy">
                            <span class="terms-text">ê°œì¸ì •ë³´ ì œ3ì ì œê³µ ë™ì˜ (í•„ìˆ˜)</span>
                        </div>
                        
                        <div class="terms-checkbox" onclick="toggleTermsAgreement('marketing')" id="termsMarketing">
                            <input type="checkbox" id="checkboxMarketing">
                            <span class="terms-text">ë§ˆì¼€íŒ… ìˆ˜ì‹  ë™ì˜ (ì„ íƒ)</span>
                        </div>
                    </div>
                    
                    <!-- ìµœì¢… ê²°ì œ ê¸ˆì•¡ -->
                    <div style="background: white; border: 1px solid #f0f0f0; border-radius: 12px; padding: 20px; margin-bottom: 25px;">
                        <div style="font-size: 16px; font-weight: 600; margin-bottom: 15px; color: #333;">ìµœì¢… ê²°ì œ ê¸ˆì•¡</div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px; font-size: 14px;">
                            <span>ìƒí’ˆ ê¸ˆì•¡</span>
                            <span id="paymentSubtotal">0ì›</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 15px; font-size: 14px; color: #666;">
                            <span>ì ë¦½ ì˜ˆì • í¬ì¸íŠ¸</span>
                            <span id="paymentPoints">0P</span>
                        </div>
                        <div style="border-top: 1px solid #f0f0f0; padding-top: 15px; display: flex; justify-content: space-between; font-size: 20px; font-weight: 700;">
                            <span>ì´ ê²°ì œê¸ˆì•¡</span>
                            <span id="paymentTotal" style="color: #ff6b6b;">0ì›</span>
                        </div>
                    </div>
                    
                    <!-- ê²°ì œ ë²„íŠ¼ -->
                    <button id="finalPaymentBtn" onclick="processPayment()" disabled style="width: 100%; background: #ddd; color: #999; border: none; padding: 18px; border-radius: 12px; font-size: 18px; font-weight: 700; cursor: not-allowed; margin-bottom: 20px;">
                        ê²°ì œ ìˆ˜ë‹¨ê³¼ ì•½ê´€ì„ ì„ íƒí•´ ì£¼ì„¸ìš”
                    </button>
                    
                    <!-- ì£¼ì˜ì‚¬í•­ -->
                    <div style="font-size: 12px; color: #666; line-height: 1.4; text-align: center;">
                        ì‡ì¸ ë¯¸ëŠ” í†µì‹ íŒë§¤ì¤‘ê°œìë¡œì„œ í†µì‹ íŒë§¤ì˜ ë‹¹ì‚¬ìê°€ ì•„ë‹ˆë©°,<br>
                        íŒë§¤ìê°€ ë“±ë¡í•œ ìƒí’ˆ ì •ë³´ ë° ê±°ë˜ì— ëŒ€í•˜ì—¬ ì±…ì„ì„ ì§€ì§€ ì•ŠìŠµë‹ˆë‹¤.
                    </div>
                </div>
            </div>
            
            <!-- ì•ŒëŒ í™”ë©´ (ì‹œê³„ ìŠ¤íƒ€ì¼) -->
            <div class="screen" id="alarmScreen">
                <div class="clock-screen">
                    <div class="clock-time">8:00</div>
                    <div class="clock-date">2ì›”(í™”) 23Â° 22Â°</div>
                    
                    <div class="alarm-notification">
                        <div class="notification-icon">ğŸ½ï¸</div>
                        <div class="notification-text">
                            <strong>ì•ˆë…•! ë“ì‹, ì¹­ì°¬ì„œì •ì„ë³´!</strong><br>
                            "ì˜¤ëŠ˜í•™ì‚¬ìœ„ì›íšŒ ê°•ì„œë³‘ëª…..."
                        </div>
                    </div>
                    
                    <div class="clock-controls">
                        <button class="control-btn">ğŸ’¡</button>
                        <button class="control-btn" onclick="showMenuNotification()">ğŸ“·</button>
                    </div>
                </div>
            </div>
            
            <!-- ì˜¤ëŠ˜ì˜ ì „ì²´ ë©”ë‰´ í™”ë©´ -->
            <div class="screen" id="todayMenuScreen">
                <div class="header">
                    <div class="back-btn" onclick="closeNotificationCenter()">â€¹</div>
                    <div class="header-title">ì˜¤ëŠ˜ì˜ ë©”ë‰´</div>
                    <div style="position: absolute; right: 20px; top: 50%; transform: translateY(-50%); cursor: pointer;" onclick="closeNotificationCenter()">Ã—</div>
                </div>
                
                <div style="padding: 20px; padding-bottom: 40px;">
                    <div style="text-align: center; margin-bottom: 30px;">
                        <div style="color: #ff6b6b; font-size: 18px; font-weight: 600; margin-bottom: 5px;">6ì›” 5ì¼ ëª©ìš”ì¼</div>
                        <div style="font-size: 14px; color: #666;">ì „ë¶ëŒ€ í›„ìƒê´€ ì‹ë‹¹ ì „ì²´ ë©”ë‰´</div>
                    </div>
                    
                    <!-- ì¹´í…Œê³ ë¦¬ë³„ ë©”ë‰´ -->
                    <div class="today-menu-category">
                        <div class="category-header">
                            <span class="category-number">â‘ </span>
                            <span class="category-name">ì¡°ì‹/ì„ì‹ğŸš</span>
                            <span class="category-status closed">ì˜ì—…ë§ˆê°</span>
                        </div>
                        <div class="category-menu">
                            <div class="menu-item-today">
                                <span class="menu-name">ì²œì›ì˜ ì•„ì¹¨(í•™ìƒí• ì¸)</span>
                                <span class="menu-price">1,000ì›</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="today-menu-category">
                        <div class="category-header">
                            <span class="category-number">â‘¡</span>
                            <span class="category-name">ì°Œê°œ/ëŒì†¥ğŸ²</span>
                            <span class="category-status open">ì˜ì—…ì¤‘</span>
                        </div>
                        <div class="category-menu">
                            <div class="menu-item-today featured">
                                <span class="menu-name">ì™•ìƒˆìš°íŠ€ê¹€ë“¤ê¹¨ì¥ë°¥*ê³„ë€í›„ë¼ì´</span>
                                <span class="menu-price">5,000ì›</span>
                                <span class="menu-badge">ì¶”ì²œ</span>
                            </div>
                            <div class="menu-item-today">
                                <span class="menu-name">ëˆë¶€ë¦¬ì°Œê°œ</span>
                                <span class="menu-price">4,500ì›</span>
                            </div>
                            <div class="menu-item-today">
                                <span class="menu-name">ê¹€ì¹˜ì°Œê°œ</span>
                                <span class="menu-price">4,000ì›</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="today-menu-category">
                        <div class="category-header">
                            <span class="category-number">â‘£</span>
                            <span class="category-name">í•œì‹ğŸš</span>
                            <span class="category-status open">ì˜ì—…ì¤‘</span>
                        </div>
                        <div class="category-menu">
                            <div class="menu-item-today">
                                <span class="menu-name">ì°¸ì¹˜ê¹€ì¹˜ë³¶ìŒë°¥</span>
                                <span class="menu-price">4,800ì›</span>
                            </div>
                            <div class="menu-item-today">
                                <span class="menu-name">ë¹„ë¹”ë°¥</span>
                                <span class="menu-price">4,300ì›</span>
                            </div>
                            <div class="menu-item-today">
                                <span class="menu-name">ëˆë¶ˆê³ ê¸°ë¹„ë¹”ë°¥</span>
                                <span class="menu-price">4,800ì›</span>
                            </div>
                            <div class="menu-item-today">
                                <span class="menu-name">ì£¼ê¾¸ë¯¸ë¹„ë¹”ë°¥</span>
                                <span class="menu-price">5,800ì›</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="today-menu-category">
                        <div class="category-header">
                            <span class="category-number">â‘¤</span>
                            <span class="category-name">ì–‘ì‹ğŸ</span>
                            <span class="category-status open">ì˜ì—…ì¤‘</span>
                        </div>
                        <div class="category-menu">
                            <div class="menu-item-today">
                                <span class="menu-name">ì¹˜ì¦ˆë“¬ë¿ë°¥ë°•*ì˜¤ë¯€ë¼ì´ìŠ¤</span>
                                <span class="menu-price">6,000ì›</span>
                            </div>
                            <div class="menu-item-today">
                                <span class="menu-name">ëª¨ë“¬ì¹´ì¸ (ì¹˜í‚¨,ëˆë“±ì‹¬,ì™•ìƒˆìš°)</span>
                                <span class="menu-price">8,000ì›</span>
                            </div>
                            <div class="menu-item-today">
                                <span class="menu-name">ì¹˜í‚¨ê¹ŒìŠ¤</span>
                                <span class="menu-price">6,000ì›</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="today-menu-category">
                        <div class="category-header">
                            <span class="category-number">â‘¥</span>
                            <span class="category-name">ë¶„ì‹ğŸœ</span>
                            <span class="category-status open">ì˜ì—…ì¤‘</span>
                        </div>
                        <div class="category-menu">
                            <div class="menu-item-today">
                                <span class="menu-name">ìƒí˜‘ê¹€ë°¥</span>
                                <span class="menu-price">3,000ì›</span>
                            </div>
                            <div class="menu-item-today">
                                <span class="menu-name">ì°¸ì¹˜ë§ˆìš”ê¹€ë°¥</span>
                                <span class="menu-price">4,000ì›</span>
                            </div>
                            <div class="menu-item-today">
                                <span class="menu-name">ìƒˆìš°íŠ€ê¹€ìš°ë™</span>
                                <span class="menu-price">4,000ì›</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let cart = [];
        let selectedItem = null;
        let selectedPaymentMethod = null;
        let termsAgreed = {
            purchase: false,
            privacy: false,
            marketing: false
        };
        
        // ì „ì—­ ë³€ìˆ˜ ì´ˆê¸°í™” - ì•ŒëŸ¬ì§€ ì •ë³´ ì €ì¥ì„ ìœ„í•œ ë³€ìˆ˜
        window.savedAllergies = null;
        
        // í˜ì´ì§€ íˆìŠ¤í† ë¦¬ ê´€ë¦¬ë¥¼ ìœ„í•œ ë³€ìˆ˜
        let previousScreen = 'mainScreen';
        
        // ì‹ê¶Œ ì‚¬ìš©ëŸ‰/êµ¬ë§¤ëŸ‰ ë°ì´í„°
        const ticketUsageData = {
            categories: {
                'ì¡°ì‹/ì„ì‹ğŸš': { used: 142, purchased: 180 },
                'ì°Œê°œ/ëŒì†¥ğŸ²': { used: 89, purchased: 120 },
                'í•œì‹ğŸš': { used: 234, purchased: 280 },
                'ì–‘ì‹ğŸ - ì˜¤ë¯€ë¼ì´ìŠ¤': { used: 76, purchased: 95 },
                'ì–‘ì‹ğŸ - ëˆê¹ŒìŠ¤': { used: 156, purchased: 190 },
                'ë¶„ì‹ğŸœ': { used: 198, purchased: 220 },
                'ë¼ë©´ãƒ»ìƒëŸ¬ë“œğŸ¥—': { used: 134, purchased: 160 }
            },
            menus: {
                'ì°¸ì¹˜ê¹€ì¹˜ë³¶ìŒë°¥': { used: 45, purchased: 58 },
                'ë¹„ë¹”ë°¥': { used: 67, purchased: 82 },
                'ëˆë¶ˆê³ ê¸°ë¹„ë¹”ë°¥': { used: 52, purchased: 65 },
                'ì£¼ê¾¸ë¯¸ë¹„ë¹”ë°¥': { used: 38, purchased: 47 }
            }
        };
        
        // ì¹´í…Œê³ ë¦¬ë³„ ë©”ë‰´ ë°ì´í„°
        const categoryMenus = {
            'ì¡°ì‹/ì„ì‹ğŸš': [
                { name: 'ì²œì›ì˜ ì•„ì¹¨(í•™ìƒí• ì¸)', price: 1000, emoji: 'ğŸ½ï¸', soldOut: true },
                { name: 'ì²œì›ì˜ ì•„ì¹¨(í•™ìƒí• ì¸)', price: 1000, emoji: 'ğŸ½ï¸', soldOut: true }
            ],
            'ì°Œê°œ/ëŒì†¥ğŸ²': [
                { name: 'ì™•ìƒˆìš°íŠ€ê¹€ë“¤ê¹¨ì¥ë°¥*ê³„ë€í›„ë¼ì´', price: 5000, emoji: 'ğŸ¦' },
                { name: 'ëˆë¶€ë¦¬ì°Œê°œ', price: 4500, emoji: 'ğŸ²' },
                { name: 'ê¹€ì¹˜ì°Œê°œ', price: 4000, emoji: 'ğŸ²' }
            ],
            'í•œì‹ğŸš': [
                { name: 'ì°¸ì¹˜ê¹€ì¹˜ë³¶ìŒë°¥', price: 4800, emoji: 'ğŸš' },
                { name: 'ë¹„ë¹”ë°¥', price: 4300, emoji: 'ğŸ›' },
                { name: 'ëˆë¶ˆê³ ê¸°ë¹„ë¹”ë°¥', price: 4800, emoji: 'ğŸ›' },
                { name: 'ì£¼ê¾¸ë¯¸ë¹„ë¹”ë°¥', price: 5800, emoji: 'ğŸ¦‘' }
            ],
            'ì–‘ì‹ğŸ - ì˜¤ë¯€ë¼ì´ìŠ¤': [
                { name: 'ì¹˜ì¦ˆë“¬ë¿ë°¥ë°•*ì˜¤ë¯€ë¼ì´ìŠ¤', price: 6000, emoji: 'ğŸ³' },
                { name: 'ì†Œì‹œì§€ ì˜¤ë¯€ë¼ì´ìŠ¤(Sausage omelet)', price: 5500, emoji: 'ğŸŒ­' }
            ],
            'ì–‘ì‹ğŸ - ëˆê¹ŒìŠ¤': [
                { name: 'ëª¨ë“¬ì¹´ì¸ (ì¹˜í‚¨,ëˆë“±ì‹¬,ì™•ìƒˆìš°)', price: 8000, emoji: 'ğŸ¤' },
                { name: 'ì¹˜í‚¨ê¹ŒìŠ¤(Chicken cutlet)', price: 6000, emoji: 'ğŸ”' },
                { name: 'ìˆœì‚´ë“±ì‹¬ëˆê¹ŒìŠ¤(Pork cutlet)', price: 6000, emoji: 'ğŸ·' },
                { name: 'ì¹˜ì¦ˆëˆê¹ŒìŠ¤(Cheese pork cutlet)', price: 6500, emoji: 'ğŸ§€' },
                { name: 'ê³ êµ¬ë§ˆì¹˜ì¦ˆëˆê¹ŒìŠ¤(Sweet potato cheese pork cutlet)', price: 7500, emoji: 'ğŸ ' }
            ],
            'ë¶„ì‹ğŸœ': [
                { name: 'ìƒí˜‘ê¹€ë°¥(Korean seaweed Rice Rolls)', price: 3000, emoji: 'ğŸ™' },
                { name: 'ì¹˜ì¦ˆê¹€ë°¥(Korean seaweed Rolls with cheese)', price: 3500, emoji: 'ğŸ§€' },
                { name: 'ìƒëŸ¬ë“œê¹€ë°¥(Korean seaweed Rice Rolls with salad)', price: 3800, emoji: 'ğŸ¥—' },
                { name: 'ì°¸ì¹˜ë§ˆìš”ê¹€ë°¥(Korean seaweed Rice Rolls with Tuna)', price: 4000, emoji: 'ğŸŸ' },
                { name: 'ìœ ë¶€ìš°ë™(Fried Bean Curd Udon)', price: 3000, emoji: 'ğŸœ' },
                { name: 'ê¹€ì¹˜ìš°ë™(Kimchi Udon)', price: 3500, emoji: 'ğŸŒ¶ï¸' },
                { name: 'ê¼¬ì¹˜ìš°ë™(Fishcake Skewer Udon)', price: 3800, emoji: 'ğŸ¢' },
                { name: 'ìƒˆìš°íŠ€ê¹€ ìš°ë™(Deep-fried Shrimp Udon)', price: 4000, emoji: 'ğŸ¦' },
                { name: 'ê¹€ë°¥ìš°ë™ì„¸íŠ¸(Korean seaweed Rice Rolls&Udon)', price: 5500, emoji: 'ğŸ™' },
                { name: 'ìœ ë¶€ìš°ë™(ê³±ë¹¼ê¸°)A large serving of Fried Bean Curd Udon', price: 3500, emoji: 'ğŸœ' },
                { name: 'ê¹€ì¹˜ìš°ë™(ê³±ë¹¼ê¸°)a large serving of kimchi udon', price: 4000, emoji: 'ğŸŒ¶ï¸' },
                { name: 'ê¼¬ì¹˜ìš°ë™(ê³±ë¹¼ê¸°)a large serving of skewers', price: 4300, emoji: 'ğŸ¢' },
                { name: 'ìƒˆìš°íŠ€ê¹€ìš°ë™(ê³±ë¹¼ê¸°)A large serving of Deep-fried Shrimp Udon', price: 4500, emoji: 'ğŸ¦' }
            ],
            'ë¼ë©´ãƒ»ìƒëŸ¬ë“œğŸ¥—': [
                { name: 'í›ˆì œì˜¤ë¦¬ìƒëŸ¬ë“œ', price: 5500, emoji: 'ğŸ¥—' },
                { name: 'ê³„ë€ë¼ë©´(Noodles)', price: 3000, emoji: 'ğŸœ' },
                { name: 'ì¹˜ì¦ˆë¼ë©´(Cheese Noodles)', price: 3500, emoji: 'ğŸ§€' },
                { name: 'ìˆœë‘ë¶€ì—´ë¼ë©´(Spicy Noodles with Soft tofu)', price: 3800, emoji: 'ğŸŒ¶ï¸' },
                { name: 'ë¼ë©´ì •ì‹(Noodles*rice)', price: 3500, emoji: 'ğŸœ' },
                { name: 'ë¼ë©´ê¹€ë°¥ì„¸íŠ¸(Noodles*Korean Seaweed rice rolls)', price: 5500, emoji: 'ğŸ™' },
                { name: 'ì§œê³„ì¹˜', price: 3500, emoji: 'ğŸ¥¤' },
                { name: 'êµ­ë¬¼ë–¡ë³¶ì´(Stir-fried Spicy Rice Cake)', price: 3500, emoji: 'ğŸ˜' },
                { name: 'ì‚¶ì€ê³„ë€(1ê°œ)Boiled Eggs', price: 500, emoji: 'ğŸ¥š' },
                { name: 'ê³µê¸°ë°¥(Steamed Rice)', price: 1000, emoji: 'ğŸš' }
            ]
        };
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì•ŒëŸ¬ì§€ ìƒíƒœ ì—…ë°ì´íŠ¸
        document.addEventListener('DOMContentLoaded', function() {
            enhanceBackButton();
            updateAllergyStatus();
        });
        
        // ê²°ì œ ìˆ˜ë‹¨ ì„ íƒ í•¨ìˆ˜
        function selectPaymentMethod(method) {
            // ëª¨ë“  ê²°ì œ ìˆ˜ë‹¨ ì„ íƒ í•´ì œ
            document.querySelectorAll('.payment-method').forEach(el => {
                el.classList.remove('selected');
            });
            
            // ì„ íƒëœ ê²°ì œ ìˆ˜ë‹¨ í™œì„±í™”
            document.getElementById('payment' + method.charAt(0).toUpperCase() + method.slice(1)).classList.add('selected');
            selectedPaymentMethod = method;
            
            updatePaymentButton();
        }
        
        // ì•½ê´€ ë™ì˜ í† ê¸€ í•¨ìˆ˜
        function toggleTermsAgreement(type) {
            if (type === 'all') {
                const allChecked = document.getElementById('checkboxAll').checked;
                termsAgreed.purchase = allChecked;
                termsAgreed.privacy = allChecked;
                termsAgreed.marketing = allChecked;
                
                document.getElementById('checkboxAll').checked = allChecked;
                document.getElementById('checkboxPurchase').checked = allChecked;
                document.getElementById('checkboxPrivacy').checked = allChecked;
                document.getElementById('checkboxMarketing').checked = allChecked;
            } else {
                termsAgreed[type] = !termsAgreed[type];
                document.getElementById('checkbox' + type.charAt(0).toUpperCase() + type.slice(1)).checked = termsAgreed[type];
                
                // ì „ì²´ ë™ì˜ ì²´í¬ë°•ìŠ¤ ìƒíƒœ ì—…ë°ì´íŠ¸
                const allAgreed = termsAgreed.purchase && termsAgreed.privacy && termsAgreed.marketing;
                document.getElementById('checkboxAll').checked = allAgreed;
            }
            
            updatePaymentButton();
        }
        
        // ê²°ì œ ë²„íŠ¼ ìƒíƒœ ì—…ë°ì´íŠ¸
        function updatePaymentButton() {
            const btn = document.getElementById('finalPaymentBtn');
            const requiredTermsAgreed = termsAgreed.purchase && termsAgreed.privacy;
            const canPay = selectedPaymentMethod && requiredTermsAgreed;
            
            if (canPay) {
                btn.disabled = false;
                btn.style.background = '#ff6b6b';
                btn.style.color = 'white';
                btn.style.cursor = 'pointer';
                const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
                btn.textContent = `${total.toLocaleString()}ì› ê²°ì œí•˜ê¸°`;
            } else {
                btn.disabled = true;
                btn.style.background = '#ddd';
                btn.style.color = '#999';
                btn.style.cursor = 'not-allowed';
                btn.textContent = 'ê²°ì œ ìˆ˜ë‹¨ê³¼ ì•½ê´€ì„ ì„ íƒí•´ ì£¼ì„¸ìš”';
            }
        }
        
        // ì•ŒëŸ¬ì§€ ìƒíƒœ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
        function updateAllergyStatus() {
            const allergyStatusElement = document.getElementById('allergyStatus');
            if (window.savedAllergies === null) {
                allergyStatusElement.textContent = 'ì•„ì§ ì„¤ì •ë˜ì§€ ì•ŠìŒ';
                allergyStatusElement.style.color = '#999';
            } else if (window.savedAllergies === false) {
                allergyStatusElement.textContent = 'âœ… ì•ŒëŸ¬ì§€ ì—†ìŒ';
                allergyStatusElement.style.color = '#4CAF50';
            } else if (Array.isArray(window.savedAllergies) && window.savedAllergies.length > 0) {
                allergyStatusElement.textContent = `âš ï¸ ì„¤ì •ë¨: ${window.savedAllergies.join(', ')}`;
                allergyStatusElement.style.color = '#ff6b6b';
            } else {
                allergyStatusElement.textContent = 'ì„¤ì • ì˜¤ë¥˜';
                allergyStatusElement.style.color = '#ff6b6b';
            }
        }
        
        // ë©”ë‰´ë³„ ìƒì„¸ ì•ŒëŸ¬ì§€ ì •ë³´ ë°ì´í„° (ì •ì‹ ì•ŒëŸ¬ì§€ ê¸°ì¤€ ì ìš©)
        const menuAllergyInfo = {
            // ì¡°ì‹/ì„ì‹
            'ì²œì›ì˜ ì•„ì¹¨(í•™ìƒí• ì¸)': ['ë‚œë¥˜(ê°€ê¸ˆë¥˜)', 'ëŒ€ë‘', 'ë°€', 'ìš°ìœ ', 'ë¼ì§€ê³ ê¸°'],
            
            // ì°Œê°œ/ëŒì†¥
            'ì™•ìƒˆìš°íŠ€ê¹€ë“¤ê¹¨ì¥ë°¥*ê³„ë€í›„ë¼ì´': ['ìƒˆìš°', 'ë‚œë¥˜(ê°€ê¸ˆë¥˜)', 'ëŒ€ë‘', 'ë°€'],
            'ëˆë¶€ë¦¬ì°Œê°œ': ['ëŒ€ë‘', 'ë°€', 'ë¼ì§€ê³ ê¸°'],
            'ê¹€ì¹˜ì°Œê°œ': ['ëŒ€ë‘', 'ë°€', 'ë¼ì§€ê³ ê¸°'],
            
            // í•œì‹
            'ì°¸ì¹˜ê¹€ì¹˜ë³¶ìŒë°¥': ['ê³ ë“±ì–´', 'ëŒ€ë‘', 'ë°€'],
            'ë¹„ë¹”ë°¥': ['ëŒ€ë‘', 'ë°€', 'ë‚œë¥˜(ê°€ê¸ˆë¥˜)'],
            'ëˆë¶ˆê³ ê¸°ë¹„ë¹”ë°¥': ['ëŒ€ë‘', 'ë°€', 'ë¼ì§€ê³ ê¸°'],
            'ì£¼ê¾¸ë¯¸ë¹„ë¹”ë°¥': ['ëŒ€ë‘', 'ë°€'],
            
            // ì–‘ì‹ - ì˜¤ë¯€ë¼ì´ìŠ¤
            'ì¹˜ì¦ˆë“¬ë¿ë°¥ë°•*ì˜¤ë¯€ë¼ì´ìŠ¤': ['ë‚œë¥˜(ê°€ê¸ˆë¥˜)', 'ìš°ìœ ', 'ë°€', 'ëŒ€ë‘'],
            'ì†Œì‹œì§€ ì˜¤ë¯€ë¼ì´ìŠ¤(Sausage omelet)': ['ë‚œë¥˜(ê°€ê¸ˆë¥˜)', 'ë°€', 'ëŒ€ë‘', 'ìš°ìœ ', 'ë¼ì§€ê³ ê¸°'],
            
            // ì–‘ì‹ - ëˆê¹ŒìŠ¤
            'ëª¨ë“¬ì¹´ì¸ (ì¹˜í‚¨,ëˆë“±ì‹¬,ì™•ìƒˆìš°)': ['ìƒˆìš°', 'ë°€', 'ë‚œë¥˜(ê°€ê¸ˆë¥˜)', 'ëŒ€ë‘', 'ë¼ì§€ê³ ê¸°'],
            'ì¹˜í‚¨ê¹ŒìŠ¤(Chicken cutlet)': ['ë°€', 'ë‚œë¥˜(ê°€ê¸ˆë¥˜)', 'ëŒ€ë‘'],
            'ìˆœì‚´ë“±ì‹¬ëˆê¹ŒìŠ¤(Pork cutlet)': ['ë°€', 'ë‚œë¥˜(ê°€ê¸ˆë¥˜)', 'ëŒ€ë‘', 'ë¼ì§€ê³ ê¸°'],
            'ì¹˜ì¦ˆëˆê¹ŒìŠ¤(Cheese pork cutlet)': ['ë°€', 'ë‚œë¥˜(ê°€ê¸ˆë¥˜)', 'ëŒ€ë‘', 'ìš°ìœ ', 'ë¼ì§€ê³ ê¸°'],
            'ê³ êµ¬ë§ˆì¹˜ì¦ˆëˆê¹ŒìŠ¤(Sweet potato cheese pork cutlet)': ['ë°€', 'ë‚œë¥˜(ê°€ê¸ˆë¥˜)', 'ëŒ€ë‘', 'ìš°ìœ ', 'ë¼ì§€ê³ ê¸°'],
            
            // ë¶„ì‹
            'ìƒí˜‘ê¹€ë°¥(Korean seaweed Rice Rolls)': ['ë‚œë¥˜(ê°€ê¸ˆë¥˜)', 'ëŒ€ë‘'],
            'ì¹˜ì¦ˆê¹€ë°¥(Korean seaweed Rolls with cheese)': ['ë‚œë¥˜(ê°€ê¸ˆë¥˜)', 'ëŒ€ë‘', 'ìš°ìœ '],
            'ìƒëŸ¬ë“œê¹€ë°¥(Korean seaweed Rice Rolls with salad)': ['ë‚œë¥˜(ê°€ê¸ˆë¥˜)', 'ëŒ€ë‘'],
            'ì°¸ì¹˜ë§ˆìš”ê¹€ë°¥(Korean seaweed Rice Rolls with Tuna)': ['ê³ ë“±ì–´', 'ë‚œë¥˜(ê°€ê¸ˆë¥˜)', 'ëŒ€ë‘'],
            'ìœ ë¶€ìš°ë™(Fried Bean Curd Udon)': ['ëŒ€ë‘', 'ë°€'],
            'ê¹€ì¹˜ìš°ë™(Kimchi Udon)': ['ëŒ€ë‘', 'ë°€'],
            'ê¼¬ì¹˜ìš°ë™(Fishcake Skewer Udon)': ['ê³ ë“±ì–´', 'ëŒ€ë‘', 'ë°€'],
            'ìƒˆìš°íŠ€ê¹€ ìš°ë™(Deep-fried Shrimp Udon)': ['ìƒˆìš°', 'ëŒ€ë‘', 'ë°€', 'ë‚œë¥˜(ê°€ê¸ˆë¥˜)'],
            'ê¹€ë°¥ìš°ë™ì„¸íŠ¸(Korean seaweed Rice Rolls&Udon)': ['ë‚œë¥˜(ê°€ê¸ˆë¥˜)', 'ëŒ€ë‘', 'ë°€'],
            'ìœ ë¶€ìš°ë™(ê³±ë¹¼ê¸°)A large serving of Fried Bean Curd Udon': ['ëŒ€ë‘', 'ë°€'],
            'ê¹€ì¹˜ìš°ë™(ê³±ë¹¼ê¸°)a large serving of kimchi udon': ['ëŒ€ë‘', 'ë°€'],
            'ê¼¬ì¹˜ìš°ë™(ê³±ë¹¼ê¸°)a large serving of skewers': ['ê³ ë“±ì–´', 'ëŒ€ë‘', 'ë°€'],
            'ìƒˆìš°íŠ€ê¹€ìš°ë™(ê³±ë¹¼ê¸°)A large serving of Deep-fried Shrimp Udon': ['ìƒˆìš°', 'ëŒ€ë‘', 'ë°€', 'ë‚œë¥˜(ê°€ê¸ˆë¥˜)'],
            
            // ë¼ë©´ãƒ»ìƒëŸ¬ë“œ
            'í›ˆì œì˜¤ë¦¬ìƒëŸ¬ë“œ': ['ëŒ€ë‘'],
            'ê³„ë€ë¼ë©´(Noodles)': ['ë‚œë¥˜(ê°€ê¸ˆë¥˜)', 'ë°€', 'ëŒ€ë‘'],
            'ì¹˜ì¦ˆë¼ë©´(Cheese Noodles)': ['ë‚œë¥˜(ê°€ê¸ˆë¥˜)', 'ë°€', 'ëŒ€ë‘', 'ìš°ìœ '],
            'ìˆœë‘ë¶€ì—´ë¼ë©´(Spicy Noodles with Soft tofu)': ['ëŒ€ë‘', 'ë°€'],
            'ë¼ë©´ì •ì‹(Noodles*rice)': ['ë‚œë¥˜(ê°€ê¸ˆë¥˜)', 'ë°€', 'ëŒ€ë‘'],
            'ë¼ë©´ê¹€ë°¥ì„¸íŠ¸(Noodles*Korean Seaweed rice rolls)': ['ë‚œë¥˜(ê°€ê¸ˆë¥˜)', 'ë°€', 'ëŒ€ë‘'],
            'ì§œê³„ì¹˜': ['ë‚œë¥˜(ê°€ê¸ˆë¥˜)', 'ë°€', 'ëŒ€ë‘'],
            'êµ­ë¬¼ë–¡ë³¶ì´(Stir-fried Spicy Rice Cake)': ['ë°€', 'ëŒ€ë‘'],
            'ì‚¶ì€ê³„ë€(1ê°œ)Boiled Eggs': ['ë‚œë¥˜(ê°€ê¸ˆë¥˜)'],
            'ê³µê¸°ë°¥(Steamed Rice)': []
        };
        
        // ë©”ë‰´ ì•„ì´í…œ ì„ íƒ
        function selectMenuItem(name, price) {
            selectedItem = { name, price };
            
            // ì•ŒëŸ¬ì§€ ì²´í¬
            if (window.savedAllergies && Array.isArray(window.savedAllergies) && window.savedAllergies.length > 0) {
                const menuAllergies = menuAllergyInfo[name] || [];
                const userAllergies = window.savedAllergies;
                const conflictingAllergies = menuAllergies.filter(allergy => userAllergies.includes(allergy));
                
                if (conflictingAllergies.length > 0) {
                    showAllergyWarning(name, price, conflictingAllergies);
                    return;
                }
            }
            
            showItemDetailPopup(name, price);
        }
        
        // ì•ŒëŸ¬ì§€ ê²½ê³  íŒì—… í‘œì‹œ
        function showAllergyWarning(name, price, allergies) {
            // ê¸°ì¡´ íŒì—…ì´ ìˆë‹¤ë©´ ì œê±°
            const existingPopup = document.getElementById('allergyWarningPopup');
            if (existingPopup) {
                existingPopup.remove();
            }
            
            // ë°°ê²½ ì˜¤ë²„ë ˆì´ ìƒì„±
            const overlay = document.createElement('div');
            overlay.id = 'allergyOverlay';
            overlay.style.cssText = `
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0,0,0,0.3);
                z-index: 999;
                opacity: 0;
                transition: opacity 0.3s ease;
            `;
            
            // ì˜¤ë²„ë ˆì´ í´ë¦­ ì‹œ íŒì—… ë‹«ê¸°
            overlay.addEventListener('click', closeAllergyWarning);
            
            const popup = document.createElement('div');
            popup.id = 'allergyWarningPopup';
            popup.style.cssText = `
                position: absolute;
                bottom: 0;
                left: 0;
                right: 0;
                background: white;
                border-radius: 20px 20px 0 0;
                box-shadow: 0 -10px 30px rgba(0,0,0,0.3);
                z-index: 1000;
                transform: translateY(100%);
                transition: transform 0.3s ease;
            `;
            
            // íŒì—… ë‚´ë¶€ í´ë¦­ ì‹œ ì´ë²¤íŠ¸ ì „íŒŒ ë°©ì§€
            popup.addEventListener('click', function(e) {
                e.stopPropagation();
            });
            
            popup.innerHTML = `
                <div style="padding: 20px;">
                    <div style="text-align: center; margin-bottom: 20px;">
                        <div style="width: 40px; height: 4px; background: #ddd; border-radius: 2px; margin: 0 auto;"></div>
                    </div>
                    
                    <div style="text-align: center; margin-bottom: 20px;">
                        <div style="font-size: 48px; margin-bottom: 15px;">âš ï¸</div>
                        <div style="font-size: 20px; font-weight: 600; color: #e74c3c; margin-bottom: 10px;">ì•ŒëŸ¬ì§€ ê²½ê³ </div>
                    </div>
                    
                    <div style="background: #fff5f5; border: 1px solid #fed7d7; border-radius: 12px; padding: 20px; margin-bottom: 20px;">
                        <div style="font-size: 16px; font-weight: 600; margin-bottom: 10px; color: #e74c3c;">
                            "${name}"ì— ë‹¤ìŒ ì•ŒëŸ¬ì§€ ì„±ë¶„ì´ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤:
                        </div>
                        <div style="font-size: 18px; font-weight: 700; color: #c53030;">
                            ${allergies.join(', ')}
                        </div>
                        <div style="font-size: 14px; color: #718096; margin-top: 10px;">
                            ì´ ë©”ë‰´ëŠ” ê·€í•˜ì˜ ì•ŒëŸ¬ì§€ ì •ë³´ì™€ ì¼ì¹˜í•©ë‹ˆë‹¤. ì£¼ë¬¸ ì‹œ ì£¼ì˜í•´ ì£¼ì„¸ìš”.
                        </div>
                    </div>
                    
                    <div style="display: flex; gap: 15px;">
                        <button onclick="closeAllergyWarning()" style="flex: 1; background: #f8f9fa; color: #333; border: 1px solid #ddd; padding: 15px; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer;">
                            ì·¨ì†Œ
                        </button>
                        <button onclick="proceedWithAllergyWarning('${name}', ${price})" style="flex: 1; background: #e74c3c; color: white; border: none; padding: 15px; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer;">
                            ì•Œê² ìŠµë‹ˆë‹¤. ê³„ì† ì£¼ë¬¸
                        </button>
                    </div>
                </div>
            `;
            
            // í•¸ë“œí° ìŠ¤í¬ë¦° ë‚´ë¶€ì— ì˜¤ë²„ë ˆì´ì™€ íŒì—… ì¶”ê°€
            document.querySelector('.phone-screen').appendChild(overlay);
            document.querySelector('.phone-screen').appendChild(popup);
            
            // ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼
            setTimeout(() => {
                overlay.style.opacity = '1';
                popup.style.transform = 'translateY(0)';
            }, 10);
        }
        
        // ì•ŒëŸ¬ì§€ ê²½ê³  íŒì—… ë‹«ê¸°
        function closeAllergyWarning() {
            const popup = document.getElementById('allergyWarningPopup');
            const overlay = document.getElementById('allergyOverlay');
            
            if (popup && overlay) {
                overlay.style.opacity = '0';
                popup.style.transform = 'translateY(100%)';
                setTimeout(() => {
                    overlay.remove();
                    popup.remove();
                }, 300);
            }
        }
        
        // ì•ŒëŸ¬ì§€ ê²½ê³ ë¥¼ í™•ì¸í•˜ê³  ê³„ì† ì§„í–‰
        function proceedWithAllergyWarning(name, price) {
            closeAllergyWarning();
            showItemDetailPopup(name, price);
        }
        
        // ì•„ì´í…œ ìƒì„¸ íŒì—… í‘œì‹œ
        function showItemDetailPopup(name, price) {
            // ê¸°ì¡´ íŒì—…ì´ ìˆë‹¤ë©´ ì œê±°
            const existingPopup = document.getElementById('itemDetailPopup');
            if (existingPopup) {
                existingPopup.remove();
            }
            
            // ë°°ê²½ ì˜¤ë²„ë ˆì´ ìƒì„±
            const overlay = document.createElement('div');
            overlay.id = 'popupOverlay';
            overlay.style.cssText = `
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0,0,0,0.3);
                z-index: 999;
                opacity: 0;
                transition: opacity 0.3s ease;
            `;
            
            // ì˜¤ë²„ë ˆì´ í´ë¦­ ì‹œ íŒì—… ë‹«ê¸°
            overlay.addEventListener('click', closeItemDetailPopup);
            
            const popup = document.createElement('div');
            popup.id = 'itemDetailPopup';
            popup.style.cssText = `
                position: absolute;
                bottom: 0;
                left: 0;
                right: 0;
                background: white;
                border-radius: 20px 20px 0 0;
                box-shadow: 0 -10px 30px rgba(0,0,0,0.3);
                z-index: 1000;
                transform: translateY(100%);
                transition: transform 0.3s ease;
            `;
            
            // íŒì—… ë‚´ë¶€ í´ë¦­ ì‹œ ì´ë²¤íŠ¸ ì „íŒŒ ë°©ì§€
            popup.addEventListener('click', function(e) {
                e.stopPropagation();
            });
            
            popup.innerHTML = `
                <div style="padding: 20px;">
                    <div style="text-align: center; margin-bottom: 20px;">
                        <div style="width: 40px; height: 4px; background: #ddd; border-radius: 2px; margin: 0 auto;"></div>
                    </div>
                    
                    <div style="font-size: 20px; font-weight: 600; margin-bottom: 10px;">${name}</div>
                    <div style="font-size: 18px; font-weight: 700; color: #ff6b6b; margin-bottom: 30px;">${price.toLocaleString()}ì›</div>
                    
                    <div style="display: flex; align-items: center; justify-content: center; gap: 20px; margin-bottom: 30px;">
                        <button onclick="decreasePopupQuantity()" style="width: 40px; height: 40px; border: 1px solid #ddd; border-radius: 50%; background: white; font-size: 20px; cursor: pointer; display: flex; align-items: center; justify-content: center;">-</button>
                        <span style="font-size: 18px; font-weight: 600; min-width: 30px; text-align: center;" id="popupQuantity">1</span>
                        <button onclick="increasePopupQuantity()" style="width: 40px; height: 40px; border: 1px solid #ddd; border-radius: 50%; background: white; font-size: 20px; cursor: pointer; display: flex; align-items: center; justify-content: center;">+</button>
                    </div>
                    
                    <div style="text-align: right; margin-bottom: 20px;">
                        <div style="font-size: 14px; color: #666;">í•©ê³„</div>
                        <div style="font-size: 18px; font-weight: 700; color: #333;" id="popupTotal">${price.toLocaleString()}ì›</div>
                    </div>
                    
                    <div style="display: flex; gap: 15px;">
                        <button onclick="closeItemDetailPopup()" style="flex: 1; background: #f8f9fa; color: #333; border: 1px solid #ddd; padding: 15px; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer;">ì·¨ì†Œ</button>
                        <button onclick="addToCart()" style="flex: 2; background: #ff6b6b; color: white; border: none; padding: 15px; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer;">ë°”ë¡œ ê²°ì œ</button>
                    </div>
                </div>
            `;
            
            // í•¸ë“œí° ìŠ¤í¬ë¦° ë‚´ë¶€ì— ì˜¤ë²„ë ˆì´ì™€ íŒì—… ì¶”ê°€
            document.querySelector('.phone-screen').appendChild(overlay);
            document.querySelector('.phone-screen').appendChild(popup);
            
            // ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼
            setTimeout(() => {
                overlay.style.opacity = '1';
                popup.style.transform = 'translateY(0)';
            }, 10);
        }
        
        function closeItemDetailPopup() {
            const popup = document.getElementById('itemDetailPopup');
            const overlay = document.getElementById('popupOverlay');
            
            if (popup && overlay) {
                overlay.style.opacity = '0';
                popup.style.transform = 'translateY(100%)';
                setTimeout(() => {
                    overlay.remove();
                    popup.remove();
                }, 300);
            }
        }
        
        let popupQuantity = 1;
        
        function increasePopupQuantity() {
            popupQuantity++;
            updatePopupDisplay();
        }
        
        function decreasePopupQuantity() {
            if (popupQuantity > 1) {
                popupQuantity--;
                updatePopupDisplay();
            }
        }
        
        function updatePopupDisplay() {
            document.getElementById('popupQuantity').textContent = popupQuantity;
            const total = selectedItem.price * popupQuantity;
            document.getElementById('popupTotal').textContent = total.toLocaleString() + 'ì›';
        }
        
        function addToCart() {
            const existingItem = cart.find(item => item.name === selectedItem.name);
            
            if (existingItem) {
                existingItem.quantity += popupQuantity;
            } else {
                cart.push({
                    name: selectedItem.name,
                    price: selectedItem.price,
                    quantity: popupQuantity
                });
            }
            
            updateCartDisplay();
            closeItemDetailPopup();
            showCartScreen();
            popupQuantity = 1;
        }
        
        function updateCartDisplay() {
            const cartItems = document.getElementById('cartItems');
            
            if (cart.length === 0) {
                cartItems.innerHTML = '<div style="text-align: center; color: #999; padding: 40px;">ì¥ë°”êµ¬ë‹ˆê°€ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.</div>';
                return;
            }
            
            // ì¥ë°”êµ¬ë‹ˆ ì•„ì´í…œ ëª©ë¡ ìƒì„±
            cartItems.innerHTML = cart.map(item => `
                <div style="display: flex; justify-content: space-between; align-items: center; padding: 15px 0; border-bottom: 1px solid #f0f0f0;">
                    <div style="flex: 1;">
                        <div style="font-size: 16px; font-weight: 600; margin-bottom: 5px;">${item.name}</div>
                        <div style="font-size: 16px; font-weight: 700; color: #ff6b6b;">${item.price.toLocaleString()}ì›</div>
                    </div>
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <button onclick="decreaseCartItem('${item.name}')" style="width: 30px; height: 30px; border: 1px solid #ddd; border-radius: 50%; background: white; font-size: 16px; cursor: pointer; display: flex; align-items: center; justify-content: center;">-</button>
                        <span style="font-size: 16px; min-width: 20px; text-align: center;">${item.quantity}</span>
                        <button onclick="increaseCartItem('${item.name}')" style="width: 30px; height: 30px; border: 1px solid #ddd; border-radius: 50%; background: white; font-size: 16px; cursor: pointer; display: flex; align-items: center; justify-content: center;">+</button>
                        <button onclick="removeCartItem('${item.name}')" style="color: #999; background: none; border: none; font-size: 18px; cursor: pointer; margin-left: 5px;">Ã—</button>
                    </div>
                </div>
            `).join('');
            
            updateCartTotals();
        }
        
        function updateCartTotals() {
            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const points = Math.floor(subtotal * 0.01);
            
            // ì¥ë°”êµ¬ë‹ˆ í™”ë©´ ì—…ë°ì´íŠ¸
            document.getElementById('cartSubtotal').textContent = subtotal.toLocaleString() + 'ì›';
            document.getElementById('cartPoints').textContent = points + 'P';
            document.getElementById('cartTotal').textContent = subtotal.toLocaleString() + 'ì›';
            document.getElementById('cartTotalBtn').textContent = subtotal.toLocaleString() + 'ì›';
            
            // ê²°ì œ í™”ë©´ ì—…ë°ì´íŠ¸
            document.getElementById('paymentSubtotal').textContent = subtotal.toLocaleString() + 'ì›';
            document.getElementById('paymentPoints').textContent = points + 'P';
            document.getElementById('paymentTotal').textContent = subtotal.toLocaleString() + 'ì›';
            document.getElementById('paymentOrderTotal').textContent = subtotal.toLocaleString() + 'ì›';
            
            // ì£¼ë¬¸ ìƒí’ˆ ìš”ì•½ ì—…ë°ì´íŠ¸
            updatePaymentOrderSummary();
            
            // ê²°ì œ ë²„íŠ¼ ì—…ë°ì´íŠ¸
            updatePaymentButton();
        }
        
        function updatePaymentOrderSummary() {
            const paymentOrderSummary = document.getElementById('paymentOrderSummary');
            if (cart.length === 0) {
                paymentOrderSummary.innerHTML = '<div style="color: #999;">ì£¼ë¬¸í•œ ìƒí’ˆì´ ì—†ìŠµë‹ˆë‹¤.</div>';
                return;
            }
            
            paymentOrderSummary.innerHTML = cart.map(item => `
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                    <div style="flex: 1;">
                        <div style="font-size: 14px; font-weight: 600; color: #333;">${item.name}</div>
                        <div style="font-size: 12px; color: #666;">${item.price.toLocaleString()}ì› Ã— ${item.quantity}ê°œ</div>
                    </div>
                    <div style="font-size: 14px; font-weight: 600; color: #ff6b6b;">
                        ${(item.price * item.quantity).toLocaleString()}ì›
                    </div>
                </div>
            `).join('');
        }
        
        function increaseCartItem(name) {
            const item = cart.find(item => item.name === name);
            if (item) {
                item.quantity++;
                updateCartDisplay();
            }
        }
        
        function decreaseCartItem(name) {
            const item = cart.find(item => item.name === name);
            if (item && item.quantity > 1) {
                item.quantity--;
                updateCartDisplay();
            }
        }
        
        function removeCartItem(name) {
            cart = cart.filter(item => item.name !== name);
            updateCartDisplay();
        }
        
        function showCartScreen() {
            const currentScreen = document.querySelector('.screen.active').id;
            showScreen('cartScreen', currentScreen);
            updateCartDisplay();
        }
        
        function showPaymentScreen() {
            const currentScreen = document.querySelector('.screen.active').id;
            showScreen('paymentScreen', currentScreen);
            updateCartTotals();
            
            // ê²°ì œ í™”ë©´ ì´ˆê¸°í™”
            selectedPaymentMethod = null;
            termsAgreed = { purchase: false, privacy: false, marketing: false };
            
            document.querySelectorAll('.payment-method').forEach(el => {
                el.classList.remove('selected');
            });
            
            document.querySelectorAll('input[type="checkbox"]').forEach(el => {
                el.checked = false;
            });
            
            updatePaymentButton();
        }
        
        function processPayment() {
            if (!selectedPaymentMethod || !termsAgreed.purchase || !termsAgreed.privacy) {
                alert('ê²°ì œ ìˆ˜ë‹¨ì„ ì„ íƒí•˜ê³  í•„ìˆ˜ ì•½ê´€ì— ë™ì˜í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            alert(`${total.toLocaleString()}ì› ê²°ì œê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!`);
            cart = [];
            updateCartDisplay();
            showMainScreen();
        }
        
        // í˜„ì¬ ì‹œê°„ í‘œì‹œ
        function updateTime() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('ko-KR', {
                hour: '2-digit',
                minute: '2-digit',
                hour12: false
            });
            document.getElementById('currentTime').textContent = timeString;
        }
        
        updateTime();
        setInterval(updateTime, 1000);
        
        // í™”ë©´ ì „í™˜ í•¨ìˆ˜ë“¤
        function showScreen(screenId, fromScreen = null) {
            // ì´ì „ í™”ë©´ ì •ë³´ ì €ì¥
            if (fromScreen) {
                previousScreen = fromScreen;
            }
            
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            document.getElementById(screenId).classList.add('active');
            
            // ë„¤ë¹„ê²Œì´ì…˜ í™œì„±í™” ìƒíƒœ ë³€ê²½
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
        }
        
        function showMainScreen() {
            showScreen('mainScreen');
            previousScreen = 'mainScreen';
            updateAllergyStatus(); // ë©”ì¸ í™”ë©´ìœ¼ë¡œ ëŒì•„ê°ˆ ë•Œ ì•ŒëŸ¬ì§€ ìƒíƒœ ì—…ë°ì´íŠ¸
        }
        
        // ì¹´í…Œê³ ë¦¬ë³„ ë©”ë‰´ í‘œì‹œ í•¨ìˆ˜
        function showCategoryMenu(categoryName) {
            const currentScreen = document.querySelector('.screen.active').id;
            showScreen('congestionScreen', currentScreen);
            
            // ë©”ë‰´ ì»¨í…Œì´ë„ˆë§Œ ì—…ë°ì´íŠ¸ (ì¹´í…Œê³ ë¦¬ ì œëª© ì œê±°)
            const menuContainer = document.getElementById('menuContainer');
            
            // í•´ë‹¹ ì¹´í…Œê³ ë¦¬ì˜ ë©”ë‰´ ê°€ì ¸ì˜¤ê¸°
            const menus = categoryMenus[categoryName] || [];
            
            // ë©”ë‰´ ì»¨í…Œì´ë„ˆ ì´ˆê¸°í™” ë° ë©”ë‰´ ìƒì„±
            menuContainer.innerHTML = '';
            
            if (menus.length <= 2) {
                // ë©”ë‰´ê°€ 2ê°œ ì´í•˜ë©´ ê·¸ë¦¬ë“œ í˜•íƒœë¡œ í‘œì‹œ
                const menuGrid = document.createElement('div');
                menuGrid.className = 'menu-grid';
                
                menus.forEach(menu => {
                    const menuCard = createMenuCard(menu);
                    menuGrid.appendChild(menuCard);
                });
                
                menuContainer.appendChild(menuGrid);
            } else {
                // ë©”ë‰´ê°€ ë§ìœ¼ë©´ ë¦¬ìŠ¤íŠ¸ í˜•íƒœë¡œ í‘œì‹œ
                menus.forEach(menu => {
                    const menuItem = createMenuListItem(menu);
                    menuContainer.appendChild(menuItem);
                });
            }
        }
        
        // ë©”ë‰´ ì¹´ë“œ ìƒì„± í•¨ìˆ˜
        function createMenuCard(menu) {
            const menuCard = document.createElement('div');
            menuCard.className = 'menu-card';
            
            if (menu.soldOut) {
                menuCard.style.opacity = '0.6';
                menuCard.style.position = 'relative';
            }
            
            menuCard.onclick = menu.soldOut ? null : () => selectMenuItem(menu.name, menu.price);
            
            menuCard.innerHTML = `
                <div class="menu-image">${menu.emoji}</div>
                <div class="menu-card-content">
                    <div class="menu-card-title">${menu.name}</div>
                    <div class="menu-card-price">${menu.price.toLocaleString()}ì›</div>
                    ${getMenuTicketInfo(menu.name)}
                </div>
                ${menu.soldOut ? '<div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(0,0,0,0.8); color: white; padding: 8px 16px; border-radius: 20px; font-size: 14px; font-weight: 600;">ì£¼ë¬¸ë¶ˆê°€</div>' : ''}
            `;
            
            return menuCard;
        }
        
        // ë©”ë‰´ ë¦¬ìŠ¤íŠ¸ ì•„ì´í…œ ìƒì„± í•¨ìˆ˜
        function createMenuListItem(menu) {
            const menuItem = document.createElement('div');
            menuItem.style.cssText = `
                background: white;
                border-radius: 12px;
                padding: 15px;
                margin-bottom: 15px;
                box-shadow: 0 2px 8px rgba(0,0,0,0.1);
                display: flex;
                justify-content: space-between;
                align-items: center;
                cursor: ${menu.soldOut ? 'not-allowed' : 'pointer'};
                opacity: ${menu.soldOut ? '0.6' : '1'};
                position: relative;
            `;
            
            if (!menu.soldOut) {
                menuItem.onclick = () => selectMenuItem(menu.name, menu.price);
            }
            
            menuItem.innerHTML = `
                <div style="flex: 1;">
                    <div style="font-size: 16px; font-weight: 600; color: #333; margin-bottom: 5px;">${menu.name}</div>
                    <div style="font-size: 16px; font-weight: 700; color: #e74c3c; margin-bottom: 8px;">${menu.price.toLocaleString()}ì›</div>
                    ${getMenuTicketInfo(menu.name)}
                </div>
                <div style="font-size: 40px; margin-left: 15px;">${menu.emoji}</div>
                ${menu.soldOut ? '<div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(0,0,0,0.8); color: white; padding: 8px 16px; border-radius: 20px; font-size: 14px; font-weight: 600;">ì£¼ë¬¸ë¶ˆê°€</div>' : ''}
            `;
            
            return menuItem;
        }
        
        // ë©”ë‰´ë³„ ì‹ê¶Œ ì •ë³´ ê°€ì ¸ì˜¤ê¸° í•¨ìˆ˜
        function getMenuTicketInfo(menuName) {
            const menuData = ticketUsageData.menus[menuName];
            if (menuData) {
                return `
                    <div style="display: flex; gap: 8px; margin-top: 8px; font-size: 10px;">
                        <span style="background: #e3f2fd; color: #1976d2; padding: 2px 4px; border-radius: 6px;">ğŸ« ${menuData.used}ì¥</span>
                        <span style="background: #f3e5f5; color: #7b1fa2; padding: 2px 4px; border-radius: 6px;">ğŸ’³ ${menuData.purchased}ì¥</span>
                    </div>
                `;
            }
            return '';
        }
        
        function showCongestionScreen() {
            // ê¸°ë³¸ì ìœ¼ë¡œ í•œì‹ ë©”ë‰´ë¥¼ ë³´ì—¬ì¤Œ
            showCategoryMenu('í•œì‹ğŸš');
        }
        
        function showAlarmScreen() {
            const currentScreen = document.querySelector('.screen.active').id;
            showScreen('alarmScreen', currentScreen);
        }
        
        function showCouponScreen() {
            const currentScreen = document.querySelector('.screen.active').id;
            showScreen('couponScreen', currentScreen);
        }
        
        function showOrderHistoryScreen() {
            const currentScreen = document.querySelector('.screen.active').id;
            showScreen('orderHistoryScreen', currentScreen);
        }
        
        // ì•Œë¦¼ ì„¼í„° í† ê¸€ í•¨ìˆ˜
        function toggleNotificationCenter() {
            const notificationCenter = document.getElementById('notificationCenter');
            notificationCenter.classList.toggle('active');
        }
        
        // ì•Œë¦¼ ì„¼í„° ë‹«ê¸°
        function closeNotificationCenter() {
            const notificationCenter = document.getElementById('notificationCenter');
            notificationCenter.classList.remove('active');
            showMainScreen();
        }
        
        // ì˜¤ëŠ˜ì˜ ë©”ë‰´ í™”ë©´ ì—´ê¸°
        function openTodayMenu() {
            const notificationCenter = document.getElementById('notificationCenter');
            notificationCenter.classList.remove('active');
            showScreen('todayMenuScreen');
        }
        
        // ì•Œë¦¼ ê°œë³„ ë‹«ê¸°
        function closeNotification(element) {
            element.closest('.notification-item').style.display = 'none';
        }
        
        // ì´ì „ í˜ì´ì§€ë¡œ ëŒì•„ê°€ëŠ” í•¨ìˆ˜ (íŒì—… ì²´í¬ í¬í•¨)
        function goBack() {
            // íŒì—…ì´ ì—´ë ¤ìˆëŠ”ì§€ í™•ì¸í•˜ê³  ë¨¼ì € ë‹«ê¸°
            const itemPopup = document.getElementById('itemDetailPopup');
            const allergyPopup = document.getElementById('allergyWarningPopup');
            
            if (itemPopup || allergyPopup) {
                closeItemDetailPopup();
                closeAllergyWarning();
                return;
            }
            
            // íŒì—…ì´ ì—†ìœ¼ë©´ ì •ìƒì ì¸ ë’¤ë¡œê°€ê¸°
            if (previousScreen) {
                showScreen(previousScreen);
            } else {
                showMainScreen();
            }
        }
        
        // ë’¤ë¡œê°€ê¸° ë²„íŠ¼ë“¤ì— íŒì—… ì²´í¬ ë¡œì§ ì¶”ê°€
        function enhanceBackButton() {
            // ëª¨ë“  ë’¤ë¡œê°€ê¸° ë²„íŠ¼ì— ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
            document.addEventListener('click', function(e) {
                if (e.target.classList.contains('back-btn')) {
                    e.preventDefault();
                    e.stopPropagation();
                    
                    // íŒì—…ì´ ì—´ë ¤ìˆëŠ”ì§€ í™•ì¸
                    const itemPopup = document.getElementById('itemDetailPopup');
                    const allergyPopup = document.getElementById('allergyWarningPopup');
                    
                    if (itemPopup || allergyPopup) {
                        closeItemDetailPopup();
                        closeAllergyWarning();
                        return;
                    }
                    
                    // íŠ¹ì • í™”ë©´ë³„ ë’¤ë¡œê°€ê¸° ì²˜ë¦¬
                    const currentScreen = document.querySelector('.screen.active').id;
                    
                    switch(currentScreen) {
                        case 'congestionScreen':
                            showMainScreen();
                            break;
                        case 'cartScreen':
                            showCongestionScreen();
                            break;
                        case 'paymentScreen':
                            showCartScreen();
                            break;
                        case 'alarmScreen':
                            showMainScreen();
                            break;
                        case 'menuNotificationScreen':
                            showAlarmScreen();
                            break;
                        default:
                            if (previousScreen) {
                                showScreen(previousScreen);
                            } else {
                                showMainScreen();
                            }
                    }
                }
            });
        }
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ë’¤ë¡œê°€ê¸° ë²„íŠ¼ ê¸°ëŠ¥ í™œì„±í™”
        document.addEventListener('DOMContentLoaded', function() {
            enhanceBackButton();
            updateAllergyStatus();
        });
        
        // ì£¼ë¬¸ ë‚´ì—­ íƒ­ ì „í™˜
        function switchOrderTab(tabNumber) {
            const tab1 = document.getElementById('orderTab1');
            const tab2 = document.getElementById('orderTab2');
            const content1 = document.getElementById('orderContent1');
            const content2 = document.getElementById('orderContent2');
            
            if (tabNumber === 1) {
                // ì§„í–‰ì¤‘ íƒ­
                tab1.style.borderBottom = '3px solid #333';
                tab1.style.fontWeight = '600';
                tab1.style.color = '#333';
                
                tab2.style.borderBottom = '1px solid #f0f0f0';
                tab2.style.fontWeight = 'normal';
                tab2.style.color = '#999';
                
                content1.style.display = 'block';
                content2.style.display = 'none';
            } else {
                // ì „ì²´ ë‚´ì—­ íƒ­
                tab2.style.borderBottom = '3px solid #333';
                tab2.style.fontWeight = '600';
                tab2.style.color = '#333';
                
                tab1.style.borderBottom = '1px solid #f0f0f0';
                tab1.style.fontWeight = 'normal';
                tab1.style.color = '#999';
                
                content1.style.display = 'none';
                content2.style.display = 'block';
            }
        }
        
        // êµí™˜ê¶Œ/ì¿ í° íƒ­ ì „í™˜
        function switchCouponTab(tabNumber) {
            const tab1 = document.getElementById('couponTab1');
            const tab2 = document.getElementById('couponTab2');
            const content1 = document.getElementById('couponContent1');
            const content2 = document.getElementById('couponContent2');
            
            if (tabNumber === 1) {
                // êµí™˜ê¶Œ íƒ­
                tab1.style.borderBottom = '3px solid #333';
                tab1.style.fontWeight = '600';
                tab1.style.color = '#333';
                
                tab2.style.borderBottom = '1px solid #f0f0f0';
                tab2.style.fontWeight = 'normal';
                tab2.style.color = '#999';
                
                content1.style.display = 'block';
                content2.style.display = 'none';
            } else {
                // ì¿ í° íƒ­
                tab2.style.borderBottom = '3px solid #333';
                tab2.style.fontWeight = '600';
                tab2.style.color = '#333';
                
                tab1.style.borderBottom = '1px solid #f0f0f0';
                tab1.style.fontWeight = 'normal';
                tab1.style.color = '#999';
                
                content1.style.display = 'none';
                content2.style.display = 'block';
            }
        }
        
        // ì•ŒëŸ¬ì§€ ì •ë³´ í™”ë©´
        function showAllergyScreen() {
            // ê¸°ì¡´ ì•ŒëŸ¬ì§€ í™”ë©´ì´ ìˆë‹¤ë©´ ì œê±°
            const existingScreen = document.getElementById('allergyScreen');
            if (existingScreen) {
                existingScreen.remove();
            }
            
            // ì•ŒëŸ¬ì§€ ì •ë³´ í™”ë©´ì„ ë™ì ìœ¼ë¡œ ìƒì„±
            const allergyScreen = document.createElement('div');
            allergyScreen.className = 'screen active';
            allergyScreen.id = 'allergyScreen';
            allergyScreen.innerHTML = `
                <div class="header">
                    <div class="back-btn" onclick="closeAllergyScreen()">â€¹</div>
                    <div class="header-title">ì•ŒëŸ¬ì§€ê°€ ìˆìœ¼ì‹­ë‹ˆê¹Œ?</div>
                </div>
                
                <div style="padding: 40px 20px; text-align: center;">
                    <div style="font-size: 24px; margin-bottom: 50px; color: #333;">
                        ì•ŒëŸ¬ì§€ê°€ ìˆìœ¼ì‹­ë‹ˆê¹Œ?
                    </div>
                    
                    <div style="display: flex; gap: 30px; justify-content: center; margin-bottom: 50px;">
                        <button onclick="selectAllergy(true)" style="
                            background: #ff6b6b; 
                            color: white; 
                            border: none; 
                            padding: 20px 40px; 
                            border-radius: 12px; 
                            font-size: 18px; 
                            font-weight: 600;
                            cursor: pointer;
                        ">ì˜ˆ</button>
                        
                        <button onclick="selectAllergy(false)" style="
                            background: #f8f9fa; 
                            color: #333; 
                            border: 1px solid #ddd; 
                            padding: 20px 40px; 
                            border-radius: 12px; 
                            font-size: 18px; 
                            font-weight: 600;
                            cursor: pointer;
                        ">ì•„ë‹ˆìš”</button>
                    </div>
                    
                    <div id="allergyDetails" style="display: none;">
                        <div style="background: white; border-radius: 12px; padding: 20px; margin-bottom: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); text-align: left;">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 15px;">ì•ŒëŸ¬ì§€ ì •ë³´ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.</div>
                            
                            <div class="allergy-item">
                                <label style="display: flex; align-items: center; padding: 10px 0; cursor: pointer;">
                                    <input type="checkbox" style="margin-right: 10px; transform: scale(1.2);" value="ë‚œë¥˜(ê°€ê¸ˆë¥˜)">
                                    <span>â‘ ë‚œë¥˜(ê°€ê¸ˆë¥˜) - ë‹¬ê±€, ë‹­ê³ ê¸° ë“±</span>
                                </label>
                            </div>
                            
                            <div class="allergy-item">
                                <label style="display: flex; align-items: center; padding: 10px 0; cursor: pointer;">
                                    <input type="checkbox" style="margin-right: 10px; transform: scale(1.2);" value="ìš°ìœ ">
                                    <span>â‘¡ìš°ìœ  - ìš°ìœ , ì¹˜ì¦ˆ, ë²„í„° ë“±</span>
                                </label>
                            </div>
                            
                            <div class="allergy-item">
                                <label style="display: flex; align-items: center; padding: 10px 0; cursor: pointer;">
                                    <input type="checkbox" style="margin-right: 10px; transform: scale(1.2);" value="ë©”ë°€">
                                    <span>â‘¢ë©”ë°€ - ë©”ë°€ë©´, ë©”ë°€ê°€ë£¨ ë“±</span>
                                </label>
                            </div>
                            
                            <div class="allergy-item">
                                <label style="display: flex; align-items: center; padding: 10px 0; cursor: pointer;">
                                    <input type="checkbox" style="margin-right: 10px; transform: scale(1.2);" value="ë•…ì½©">
                                    <span>â‘£ë•…ì½© - ë•…ì½©, ë•…ì½©ë²„í„° ë“±</span>
                                </label>
                            </div>
                            
                            <div class="allergy-item">
                                <label style="display: flex; align-items: center; padding: 10px 0; cursor: pointer;">
                                    <input type="checkbox" style="margin-right: 10px; transform: scale(1.2);" value="ëŒ€ë‘">
                                    <span>â‘¤ëŒ€ë‘ - ì½©, ëœì¥, ê°„ì¥, ë‘ë¶€ ë“±</span>
                                </label>
                            </div>
                            
                            <div class="allergy-item">
                                <label style="display: flex; align-items: center; padding: 10px 0; cursor: pointer;">
                                    <input type="checkbox" style="margin-right: 10px; transform: scale(1.2);" value="ë°€">
                                    <span>â‘¥ë°€ - ë°€ê°€ë£¨, ë©´ë¥˜, ë¹µ ë“±</span>
                                </label>
                            </div>
                            
                            <div class="allergy-item">
                                <label style="display: flex; align-items: center; padding: 10px 0; cursor: pointer;">
                                    <input type="checkbox" style="margin-right: 10px; transform: scale(1.2);" value="ê³ ë“±ì–´">
                                    <span>â‘¦ê³ ë“±ì–´ - ê³ ë“±ì–´, ì°¸ì¹˜, ì–´ë¬µ ë“±</span>
                                </label>
                            </div>
                            
                            <div class="allergy-item">
                                <label style="display: flex; align-items: center; padding: 10px 0; cursor: pointer;">
                                    <input type="checkbox" style="margin-right: 10px; transform: scale(1.2);" value="ê²Œ">
                                    <span>â‘§ê²Œ - ê²Œ, ê²Œì‚´ ë“±</span>
                                </label>
                            </div>
                            
                            <div class="allergy-item">
                                <label style="display: flex; align-items: center; padding: 10px 0; cursor: pointer;">
                                    <input type="checkbox" style="margin-right: 10px; transform: scale(1.2);" value="ìƒˆìš°">
                                    <span>â‘¨ìƒˆìš° - ìƒˆìš°, ìƒˆìš°ì “ ë“±</span>
                                </label>
                            </div>
                            
                            <div class="allergy-item">
                                <label style="display: flex; align-items: center; padding: 10px 0; cursor: pointer;">
                                    <input type="checkbox" style="margin-right: 10px; transform: scale(1.2);" value="ë¼ì§€ê³ ê¸°">
                                    <span>â‘©ë¼ì§€ê³ ê¸° - ë¼ì§€ê³ ê¸°, ë² ì´ì»¨, í–„ ë“±</span>
                                </label>
                            </div>
                            
                            <div class="allergy-item">
                                <label style="display: flex; align-items: center; padding: 10px 0; cursor: pointer;">
                                    <input type="checkbox" style="margin-right: 10px; transform: scale(1.2);" value="ë³µìˆ­ì•„">
                                    <span>â‘ªë³µìˆ­ì•„ - ë³µìˆ­ì•„, ë³µìˆ­ì•„ ì£¼ìŠ¤ ë“±</span>
                                </label>
                            </div>
                            
                            <div class="allergy-item">
                                <label style="display: flex; align-items: center; padding: 10px 0; cursor: pointer;">
                                    <input type="checkbox" style="margin-right: 10px; transform: scale(1.2);" value="í† ë§ˆí† ">
                                    <span>â‘«í† ë§ˆí†  - í† ë§ˆí† , í† ë§ˆí† ì†ŒìŠ¤ ë“±</span>
                                </label>
                            </div>
                        </div>
                        
                        <button onclick="saveAllergyInfo()" style="
                            width: 100%; 
                            background: #667eea; 
                            color: white; 
                            border: none; 
                            padding: 15px; 
                            border-radius: 8px; 
                            font-size: 16px; 
                            font-weight: 600;
                            cursor: pointer;
                        ">ì €ì¥</button>
                    </div>
                    
                    <div id="noAllergyMessage" style="display: none;">
                        <div style="background: #e8f5e8; border: 1px solid #4CAF50; border-radius: 12px; padding: 20px; color: #2e7d32;">
                            <div style="font-size: 18px; font-weight: 600; margin-bottom: 10px;">âœ… ì¢‹ìŠµë‹ˆë‹¤!</div>
                            <div>ì•ŒëŸ¬ì§€ê°€ ì—†ìœ¼ì‹œêµ°ìš”. ëª¨ë“  ë©”ë‰´ë¥¼ ì•ˆì „í•˜ê²Œ ë“œì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</div>
                        </div>
                    </div>
                </div>
            `;
            
            // ê¸°ì¡´ í™”ë©´ ìˆ¨ê¸°ê³  ìƒˆ í™”ë©´ í‘œì‹œ
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            
            document.querySelector('.phone-screen').appendChild(allergyScreen);
        }
        
        function selectAllergy(hasAllergy) {
            const allergyDetails = document.getElementById('allergyDetails');
            const noAllergyMessage = document.getElementById('noAllergyMessage');
            
            if (hasAllergy) {
                allergyDetails.style.display = 'block';
                noAllergyMessage.style.display = 'none';
            } else {
                allergyDetails.style.display = 'none';
                noAllergyMessage.style.display = 'block';
                
                // ì•ŒëŸ¬ì§€ ì—†ìŒìœ¼ë¡œ ì €ì¥
                window.savedAllergies = false;
                
                // 3ì´ˆ í›„ ìë™ìœ¼ë¡œ ë©”ì¸ í™”ë©´ìœ¼ë¡œ ëŒì•„ê°€ê¸°
                setTimeout(() => {
                    closeAllergyScreen();
                }, 3000);
            }
        }
        
        function saveAllergyInfo() {
            const checkedAllergies = document.querySelectorAll('#allergyDetails input[type="checkbox"]:checked');
            const allergyList = Array.from(checkedAllergies).map(input => input.value);
            
            if (allergyList.length > 0) {
                // ì„ íƒëœ ì•ŒëŸ¬ì§€ ì •ë³´ë¥¼ ì „ì—­ ë³€ìˆ˜ì— ì €ì¥
                window.savedAllergies = allergyList;
                alert(`ì„ íƒëœ ì•ŒëŸ¬ì§€ ì •ë³´: ${allergyList.join(', ')}\n\ní•´ë‹¹ ì„±ë¶„ì´ í¬í•¨ëœ ë©”ë‰´ëŠ” í•„í„°ë§ë©ë‹ˆë‹¤.`);
            } else {
                alert('ì•ŒëŸ¬ì§€ ì •ë³´ê°€ ì„ íƒë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
                return;
            }
            
            closeAllergyScreen();
        }
        
        function closeAllergyScreen() {
            const allergyScreen = document.getElementById('allergyScreen');
            if (allergyScreen) {
                allergyScreen.remove();
            }
            showMainScreen();
        }
        
        // í˜¼ì¡ë„ ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸
        function updateCongestionData() {
            const congestionLevels = [
                { current: 192, max: 210, percentage: 91, level: 'í˜¼ì¡', color: '#ff6b6b' },
                { current: 125, max: 210, percentage: 59, level: 'ë³´í†µ', color: '#FFC107' },
                { current: 87, max: 210, percentage: 41, level: 'ì—¬ìœ ', color: '#4CAF50' },
                { current: 156, max: 210, percentage: 74, level: 'í˜¼ì¡', color: '#ff6b6b' },
                { current: 98, max: 210, percentage: 47, level: 'ì—¬ìœ ', color: '#4CAF50' }
            ];
            
            const randomData = congestionLevels[Math.floor(Math.random() * congestionLevels.length)];
            
            // í˜„ì¬ í˜¼ì¡ë„ ì •ë³´ ì—…ë°ì´íŠ¸
            const currentCongestionElement = document.getElementById('currentCongestion');
            const congestionBarElement = document.getElementById('congestionBar');
            const congestionLevelElement = document.getElementById('congestionLevel');
            
            if (currentCongestionElement) {
                currentCongestionElement.textContent = `${randomData.current}/${randomData.max}`;
            }
            
            if (congestionBarElement) {
                congestionBarElement.style.width = `${randomData.percentage}%`;
            }
            
            if (congestionLevelElement) {
                congestionLevelElement.textContent = `${randomData.percentage}%`;
                congestionLevelElement.style.color = randomData.color;
                congestionLevelElement.nextElementSibling.textContent = randomData.level;
            }
        }
        
        // 10ì´ˆë§ˆë‹¤ í˜¼ì¡ë„ ì—…ë°ì´íŠ¸
        setInterval(updateCongestionData, 10000);
        
        // ì´ˆê¸° ë¡œë“œ ì‹œ ì‹¤í–‰
        updateCongestionData();
    </script>
</body>
</html>
